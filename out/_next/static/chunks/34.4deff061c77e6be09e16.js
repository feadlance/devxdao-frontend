(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{rKwd:function(e,t,r){"use strict";r.r(t);var i=r("nKUr"),n=r("1OyB"),c=r("vuIU"),a=r("JX7q"),s=r("Ji7U"),l=r("md7G"),d=r("foSv"),b=r("rePB"),o=r("q1tI"),g=r("/MKj"),j=r("Ty5D"),m=r("UhlP"),u=r("LADp"),h=r("ZpDd");r("/08p");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(b.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=Object(d.a)(e);if(t){var n=Object(d.a)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Object(l.a)(this,r)}}var v=function(e){Object(s.a)(r,e);var t=f(r);function r(e){var i;return Object(n.a)(this,r),i=t.call(this,e),Object(b.a)(Object(a.a)(i),"clickAdd",(function(e){e.preventDefault(),i.props.dispatch(Object(h.gb)({"add-emailer-admin":{render:!0,title:"Add a new recipient of admin email alerts."}})),i.props.dispatch(Object(h.Z)("custom-global-modal"))})),Object(b.a)(Object(a.a)(i),"clickRemove",(function(e){confirm("Are you sure you are going to remove this emailer admin?")&&i.props.dispatch(Object(u.A)(e.id,(function(){i.props.dispatch(Object(h.Cb)())}),(function(e){i.props.dispatch(Object(h.U)()),e&&e.success&&i.getEmailerData()})))})),Object(b.a)(Object(a.a)(i),"changeTriggerAdmin",(function(e,t,r){var n=i.state.triggerAdmin,c=p(p({},t),{},{enabled:e.target.checked});n[r]=p(p({},n[r]),c),i.setState({triggerAdmin:n},(function(){i.props.dispatch(Object(u.hd)(t.id,c,null,null))}))})),Object(b.a)(Object(a.a)(i),"changeTriggerMember",(function(e,t,r){var n=i.state.triggerMember,c=p(p({},t),{},{enabled:e.target.checked});n[r]=p(p({},n[r]),c),i.setState({triggerMember:n},(function(){i.props.dispatch(Object(u.id)(t.id,c,null,null))}))})),Object(b.a)(Object(a.a)(i),"changeTriggerUserMessage",(function(e,t,r){var n=i.state.triggerUser,c=p(p({},t),{},{content:e.target.value});n[r]=p(p({},n[r]),c),i.setState({triggerUser:n})})),Object(b.a)(Object(a.a)(i),"changeTriggerMemberMessage",(function(e,t,r){var n=i.state.triggerMember,c=p(p({},t),{},{content:e.target.value});n[r]=p(p({},n[r]),c),i.setState({triggerMember:n})})),Object(b.a)(Object(a.a)(i),"saveTriggerUser",(function(e,t){e.preventDefault();var r=i.state.triggerUser[t];r.content&&r.content.trim()?i.props.dispatch(Object(u.jd)(r.id,r,(function(){i.props.dispatch(Object(h.Cb)())}),(function(e){i.props.dispatch(Object(h.U)()),e&&e.success&&i.disableTriggerUserEdit(null,r,t)}))):i.props.dispatch(Object(h.Bb)("Please input message content"))})),Object(b.a)(Object(a.a)(i),"saveTriggerMember",(function(e,t){e.preventDefault();var r=i.state.triggerMember[t];r.content&&r.content.trim()?i.props.dispatch(Object(u.id)(r.id,r,(function(){i.props.dispatch(Object(h.Cb)())}),(function(e){i.props.dispatch(Object(h.U)()),e&&e.success&&i.disableTriggerMemberEdit(null,r,t)}))):i.props.dispatch(Object(h.Bb)("Please input message content"))})),Object(b.a)(Object(a.a)(i),"changeTriggerUser",(function(e,t,r){var n=i.state.triggerUser,c=p(p({},t),{},{enabled:e.target.checked});n[r]=p(p({},n[r]),c),i.setState({triggerUser:n},(function(){i.props.dispatch(Object(u.jd)(t.id,c,null,null))}))})),Object(b.a)(Object(a.a)(i),"changeTriggerMember",(function(e,t,r){var n=i.state.triggerMember,c=p(p({},t),{},{enabled:e.target.checked});n[r]=p(p({},n[r]),c),i.setState({triggerMember:n},(function(){i.props.dispatch(Object(u.id)(t.id,c,null,null))}))})),Object(b.a)(Object(a.a)(i),"enableTriggerUserEdit",(function(e,t,r){e.preventDefault();var n=i.state.triggerUser,c=p(p({},t),{},{editing:!0});n[r]=p(p({},n[r]),c),i.setState({triggerUser:n})})),Object(b.a)(Object(a.a)(i),"enableTriggerMemberEdit",(function(e,t,r){e.preventDefault();var n=i.state.triggerMember,c=p(p({},t),{},{editing:!0});n[r]=p(p({},n[r]),c),i.setState({triggerMember:n})})),Object(b.a)(Object(a.a)(i),"disableTriggerUserEdit",(function(e,t,r){e&&e.preventDefault();var n=i.state.triggerUser,c=p(p({},t),{},{editing:!1});n[r]=p(p({},n[r]),c),i.setState({triggerUser:n})})),Object(b.a)(Object(a.a)(i),"disableTriggerMemberEdit",(function(e,t,r){e&&e.preventDefault();var n=i.state.triggerMember,c=p(p({},t),{},{editing:!1});n[r]=p(p({},n[r]),c),i.setState({triggerMember:n})})),i.state={admins:[],triggerAdmin:[],triggerUser:[],triggerMember:[]},i}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.getEmailerData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.customModalData,r=e.customModalData;t["add-emailer-admin"]&&t["add-emailer-admin"].render||!r["add-emailer-admin"]||!r["add-emailer-admin"].render||this.getEmailerData()}},{key:"getEmailerData",value:function(){var e=this;this.props.dispatch(Object(u.wb)((function(){e.props.dispatch(Object(h.Cb)())}),(function(t){e.props.dispatch(Object(h.U)());var r=t.data||{},i=r.admins||[],n=r.triggerAdmin||[],c=r.triggerUser||[],a=r.triggerMember||[];e.setState({admins:i,triggerAdmin:n,triggerUser:c,triggerMember:a})})))}},{key:"renderHeader",value:function(){return Object(i.jsx)("div",{className:"infinite-header",children:Object(i.jsxs)("div",{className:"infinite-headerInner",children:[Object(i.jsx)("div",{className:"c-col-1 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Email"})}),Object(i.jsx)("div",{className:"c-col-2 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Action"})})]})})}},{key:"renderAdmins",value:function(){var e=this,t=this.state.admins,r=[];return t&&t.length?(t.forEach((function(t){r.push(Object(i.jsx)("li",{children:Object(i.jsxs)("div",{className:"infinite-row",children:[Object(i.jsx)("div",{className:"c-col-1 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:t.email})}),Object(i.jsx)("div",{className:"c-col-2 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:Object(i.jsx)("a",{className:"btn btn-danger extra-small btn-fluid-small",onClick:function(){return e.clickRemove(t)},children:"Remove"})})})]})},"proposal_".concat(t.id)))})),Object(i.jsx)("ul",{children:r})):Object(i.jsx)("div",{id:"infinite-no-result",children:Object(i.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderTriggerAdmin",value:function(){var e=this,t=this.state.triggerAdmin,r=[];return t&&t.length&&t.forEach((function(t,n){r.push(Object(i.jsxs)("div",{className:"d-emailer-item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(m.a,{checked:!!t.enabled,onChange:function(r){return e.changeTriggerAdmin(r,t,n)},color:"primary"}),Object(i.jsx)("label",{children:t.title})]}),Object(i.jsx)("p",{children:t.content})]},"d-emailer-item-".concat(n)))})),r}},{key:"renderTriggerUser",value:function(){var e=this,t=this.state.triggerUser,r=[];return t&&t.length&&t.forEach((function(t,n){r.push(Object(i.jsxs)("div",{className:"d-emailer-item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(m.a,{checked:!!t.enabled,onChange:function(r){return e.changeTriggerUser(r,t,n)},color:"primary"}),Object(i.jsx)("label",{children:t.title})]}),t.editing?Object(i.jsx)("textarea",{value:t.content,onChange:function(r){return e.changeTriggerUserMessage(r,t,n)}}):Object(i.jsx)("p",{children:t.content}),t.editing?Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)("a",{style:{marginRight:"10px"},className:"btn btn-success small",onClick:function(t){return e.saveTriggerUser(t,n)},children:"Save"}),Object(i.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.disableTriggerUserEdit(r,t,n)},children:"Cancel Edit"})]}):Object(i.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.enableTriggerUserEdit(r,t,n)},children:"Edit Message"})]},"d-emailer-item-".concat(n)))})),r}},{key:"renderTriggerMember",value:function(){var e=this,t=this.state.triggerMember,r=[];return t&&t.length&&t.forEach((function(t,n){r.push(Object(i.jsxs)("div",{className:"d-emailer-item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(m.a,{checked:!!t.enabled,onChange:function(r){return e.changeTriggerMember(r,t,n)},color:"primary"}),Object(i.jsx)("label",{children:t.title})]}),t.editing?Object(i.jsx)("textarea",{value:t.content,onChange:function(r){return e.changeTriggerMemberMessage(r,t,n)}}):Object(i.jsx)("p",{children:t.content}),t.editing?Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)("a",{style:{marginRight:"10px"},className:"btn btn-success small",onClick:function(t){return e.saveTriggerMember(t,n)},children:"Save"}),Object(i.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.disableTriggerMemberEdit(r,t,n)},children:"Cancel Edit"})]}):Object(i.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.enableTriggerMemberEdit(r,t,n)},children:"Edit Message"})]},"d-emailer-item-".concat(n)))})),r}},{key:"render",value:function(){var e=this.props.authUser;return e&&e.id?e.is_admin?Object(i.jsxs)("div",{id:"dashboard-emailer-page",children:[Object(i.jsxs)("div",{id:"d-emailer-admin-section",className:"app-infinite-box",children:[Object(i.jsx)("label",{className:"d-block",children:"Emailer Admins"}),Object(i.jsx)("div",{className:"infinite-content",children:Object(i.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(i.jsx)("div",{className:"infinite-body",children:this.renderAdmins()})]})})]}),Object(i.jsx)("div",{className:"mt-3",children:Object(i.jsx)("a",{className:"btn btn-success small btn-fluid",onClick:this.clickAdd,children:"Add"})}),Object(i.jsxs)("div",{className:"d-emailer-item-section",children:[Object(i.jsx)("label",{className:"d-block mb-4",children:"Admin Email Triggers"}),this.renderTriggerAdmin()]}),Object(i.jsxs)("div",{className:"d-emailer-item-section",children:[Object(i.jsx)("label",{className:"d-block mb-4",children:"User Email Triggers"}),this.renderTriggerUser()]}),Object(i.jsxs)("div",{className:"d-emailer-item-section",children:[Object(i.jsx)("label",{className:"d-block mb-4",children:"Member Email Triggers"}),this.renderTriggerMember()]})]}):Object(i.jsx)(j.a,{to:"/"}):null}}]),r}(o.Component);t.default=Object(g.b)((function(e){return{authUser:e.global.authUser,settings:e.global.settings,customModalData:e.global.customModalData}}))(Object(j.g)(v))}}]);
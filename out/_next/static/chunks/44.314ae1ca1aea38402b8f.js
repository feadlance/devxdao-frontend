(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[44],{q3S8:function(e,t,c){"use strict";c.r(t);var s=c("nKUr"),a=c("KQm4"),n=c("1OyB"),i=c("vuIU"),l=c("JX7q"),r=c("Ji7U"),o=c("md7G"),d=c("foSv"),u=c("rePB"),h=c("q1tI"),j=c("/MKj"),b=c("Ty5D"),p=c("1tFi"),f=c("s/m+"),m=c("e+cM"),v=c("LADp"),O=c("YW6W");c("zsKP");function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;c=Reflect.construct(s,arguments,a)}else c=s.apply(this,arguments);return Object(o.a)(this,c)}}var g=c("wd/R"),N=function(e){Object(r.a)(c,e);var t=x(c);function c(e){var s;return Object(n.a)(this,c),s=t.call(this,e),Object(u.a)(Object(l.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(u.a)(Object(l.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,items:[],sort_key:"reputation.updated_at",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1,total:""},s.$elem=null,s.timer=null,s}return Object(i.a)(c,[{key:"componentDidMount",value:function(){var e=this.props.authUser;e&&e.id&&this.startTracking(),this.getReputation()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.authUser;e.authUser&&e.authUser.id||!t||!t.id||this.startTracking()}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-reputation-sectionBody"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,items:[],finished:!1},(function(){e.getReputation()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,a=t.finished,n=t.page_id;c||s||a||this.setState({page_id:n+1},(function(){e.getReputation(!1)}))}},{key:"getReputation",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,n=c.loading,i=c.finished,l=c.sort_key,r=c.sort_direction,o=c.search,d=c.page_id,u=c.items;if(!(n||s||i)){var h={sort_key:l,sort_direction:r,search:o,page_id:d,limit:20};this.props.dispatch(Object(v.Cb)(h,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.items||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,items:[].concat(Object(a.a)(u),Object(a.a)(c)),total:t.total})})))}}},{key:"renderTitle",value:function(e){return e.proposal_id?e.proposal_title:"-"}},{key:"renderValue",value:function(e){var t=parseFloat(e.value);return t>0?Object(s.jsxs)("label",{className:"font-size-14 color-success",children:["+",t]}):t<0?Object(s.jsx)("label",{className:"font-size-14 color-danger",children:t}):""}},{key:"renderStaked",value:function(e){var t=parseFloat(e.staked);return t>0?Object(s.jsxs)("label",{className:"font-size-14 color-success",children:["+",t]}):t<0?Object(s.jsx)("label",{className:"font-size-14 color-danger",children:t}):""}},{key:"renderPending",value:function(e){var t=parseFloat(e.pending);return t>0?Object(s.jsxs)("label",{className:"font-size-14 color-success",children:["+",t]}):t<0?Object(s.jsx)("label",{className:"font-size-14 color-danger",children:t}):""}},{key:"renderItems",value:function(){var e=this,t=this.state.items,c=[];return t&&t.length?(t.forEach((function(t){c.push(Object(s.jsx)("li",{children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:t.event})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 font-weight-700",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:t.type})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:e.renderValue(t)}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:e.renderStaked(t)}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:e.renderPending(t)}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:Object(s.jsxs)("label",{className:"font-size-14",children:[g(t.updated_at).local().format("M/D/YYYY")," ",g(t.updated_at).local().format("h:mm A")]})})]})},"reputation_".concat(t.id)))})),Object(s.jsx)("ul",{children:c})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,c=t.sort_key,a=t.sort_direction;return c!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==a?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,c=this.state,s=c.sort_key,a=c.sort_direction;s==e?a="asc"==a?"desc":"asc":(s=e,a="desc"),this.setState({sort_key:s,sort_direction:a},(function(){t.reloadTable()}))}},{key:"renderHeader",value:function(){var e=this;return Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("reputation.event")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Event"}),this.renderTriangle("reputation.event")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("reputation.type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Transaction Type"}),this.renderTriangle("reputation.type")]}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Earned/Returned/Lost"})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Staked"})}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Pending"})}),Object(s.jsxs)("div",{className:"c-col-7 c-cols",onClick:function(){return e.clickHeader("reputation.updated_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Date"}),this.renderTriangle("reputation.updated_at")]})]})})}},{key:"renderTotal",value:function(){var e=this.state.total,t=this.props.authUser,c=parseFloat(e)+parseFloat(t.profile.rep);return c=O.a.adjustNumericString(c.toString(),2),c=O.a.formatNumber(c)}},{key:"render",value:function(){var e=this.state,t=e.loading,c=e.search,a=e.total,n=this.props.authUser;return n&&n.id?Object(s.jsxs)("div",{id:"app-reputation-page",children:[Object(s.jsxs)("h3",{children:["My Available Reputation: ",Object(s.jsx)(p.a,{})," ",Object(s.jsx)("span",{children:n.profile.rep})]}),Object(s.jsxs)("label",{className:"d-block mb-0",children:["Total: ",Object(s.jsx)("span",{children:this.renderTotal()})]}),Object(s.jsxs)("label",{className:"d-block mb-0",children:["Staked: ",Object(s.jsx)("span",{children:a})]}),Object(s.jsxs)("label",{className:"d-block",children:["Minted Pending: ",Object(s.jsx)("span",{children:n.profile.rep_pending})]}),Object(s.jsx)(f.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:Object(s.jsxs)("section",{id:"app-reputation-section",className:"app-infinite-box",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsx)("label",{children:"Proposal Tracking"}),Object(s.jsx)("input",{type:"text",value:c,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(s.jsx)("div",{className:"infinite-body",id:"app-reputation-sectionBody",children:t?Object(s.jsx)(m.f,{}):this.renderItems()})]})})]})})]}):null}}]),c}(h.Component);t.default=Object(j.b)((function(e){return{authUser:e.global.authUser}}))(Object(b.g)(N))}}]);
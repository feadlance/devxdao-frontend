(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{rKwd:function(e,t,r){"use strict";r.r(t);var a=r("nKUr"),c=r("1OyB"),n=r("vuIU"),i=r("JX7q"),s=r("Ji7U"),l=r("md7G"),o=r("foSv"),d=r("rePB"),b=r("q1tI"),g=r("/MKj"),u=r("Ty5D"),m=r("wx14"),h=r("Ff2n"),p=(r("17x9"),r("iuhU")),j=r("H2TA"),O=r("ye/S"),f=r("NqtD"),v=r("ODXe"),x=r("yCxk"),k=b.createContext();var y=k;var N=r("PsDL"),M=b.forwardRef((function(e,t){var r=e.autoFocus,a=e.checked,c=e.checkedIcon,n=e.classes,i=e.className,s=e.defaultChecked,l=e.disabled,o=e.icon,d=e.id,g=e.inputProps,u=e.inputRef,j=e.name,O=e.onBlur,f=e.onChange,k=e.onFocus,M=e.readOnly,E=e.required,w=e.tabIndex,C=e.type,T=e.value,U=Object(h.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),D=Object(x.a)({controlled:a,default:Boolean(s),name:"SwitchBase",state:"checked"}),S=Object(v.a)(D,2),A=S[0],$=S[1],R=b.useContext(y),P=l;R&&"undefined"===typeof P&&(P=R.disabled);var I="checkbox"===C||"radio"===C;return b.createElement(N.a,Object(m.a)({component:"span",className:Object(p.a)(n.root,i,A&&n.checked,P&&n.disabled),disabled:P,tabIndex:null,role:void 0,onFocus:function(e){k&&k(e),R&&R.onFocus&&R.onFocus(e)},onBlur:function(e){O&&O(e),R&&R.onBlur&&R.onBlur(e)},ref:t},U),b.createElement("input",Object(m.a)({autoFocus:r,checked:a,defaultChecked:s,className:n.input,disabled:P,id:I&&d,name:j,onChange:function(e){var t=e.target.checked;$(t),f&&f(e,t)},readOnly:M,ref:u,required:E,tabIndex:w,type:C,value:T},g)),A?c:o)})),E=Object(j.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(M),w=b.forwardRef((function(e,t){var r=e.classes,a=e.className,c=e.color,n=void 0===c?"secondary":c,i=e.edge,s=void 0!==i&&i,l=e.size,o=void 0===l?"medium":l,d=Object(h.a)(e,["classes","className","color","edge","size"]),g=b.createElement("span",{className:r.thumb});return b.createElement("span",{className:Object(p.a)(r.root,a,{start:r.edgeStart,end:r.edgeEnd}[s],"small"===o&&r["size".concat(Object(f.a)(o))])},b.createElement(E,Object(m.a)({type:"checkbox",icon:g,checkedIcon:g,classes:{root:Object(p.a)(r.switchBase,r["color".concat(Object(f.a)(n))]),input:r.input,checked:r.checked,disabled:r.disabled},ref:t},d)),b.createElement("span",{className:r.track}))})),C=Object(j.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(O.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(O.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(w),T=r("LADp"),U=r("ZpDd");r("/08p");function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Object(o.a)(e);if(t){var c=Object(o.a)(this).constructor;r=Reflect.construct(a,arguments,c)}else r=a.apply(this,arguments);return Object(l.a)(this,r)}}var $=function(e){Object(s.a)(r,e);var t=A(r);function r(e){var a;return Object(c.a)(this,r),a=t.call(this,e),Object(d.a)(Object(i.a)(a),"clickAdd",(function(e){e.preventDefault(),a.props.dispatch(Object(U.Y)({"add-emailer-admin":{render:!0,title:"Add a new recipient of admin email alerts."}})),a.props.dispatch(Object(U.R)("custom-global-modal"))})),Object(d.a)(Object(i.a)(a),"clickRemove",(function(e){confirm("Are you sure you are going to remove this emailer admin?")&&a.props.dispatch(Object(T.v)(e.id,(function(){a.props.dispatch(Object(U.ub)())}),(function(e){a.props.dispatch(Object(U.N)()),e&&e.success&&a.getEmailerData()})))})),Object(d.a)(Object(i.a)(a),"changeTriggerAdmin",(function(e,t,r){var c=a.state.triggerAdmin,n=S(S({},t),{},{enabled:e.target.checked});c[r]=S(S({},c[r]),n),a.setState({triggerAdmin:c},(function(){a.props.dispatch(Object(T.fc)(t.id,n,null,null))}))})),Object(d.a)(Object(i.a)(a),"changeTriggerMember",(function(e,t,r){var c=a.state.triggerMember,n=S(S({},t),{},{enabled:e.target.checked});c[r]=S(S({},c[r]),n),a.setState({triggerMember:c},(function(){a.props.dispatch(Object(T.gc)(t.id,n,null,null))}))})),Object(d.a)(Object(i.a)(a),"changeTriggerUserMessage",(function(e,t,r){var c=a.state.triggerUser,n=S(S({},t),{},{content:e.target.value});c[r]=S(S({},c[r]),n),a.setState({triggerUser:c})})),Object(d.a)(Object(i.a)(a),"changeTriggerMemberMessage",(function(e,t,r){var c=a.state.triggerMember,n=S(S({},t),{},{content:e.target.value});c[r]=S(S({},c[r]),n),a.setState({triggerMember:c})})),Object(d.a)(Object(i.a)(a),"saveTriggerUser",(function(e,t){e.preventDefault();var r=a.state.triggerUser[t];r.content&&r.content.trim()?a.props.dispatch(Object(T.hc)(r.id,r,(function(){a.props.dispatch(Object(U.ub)())}),(function(e){a.props.dispatch(Object(U.N)()),e&&e.success&&a.disableTriggerUserEdit(null,r,t)}))):a.props.dispatch(Object(U.tb)("Please input message content"))})),Object(d.a)(Object(i.a)(a),"saveTriggerMember",(function(e,t){e.preventDefault();var r=a.state.triggerMember[t];r.content&&r.content.trim()?a.props.dispatch(Object(T.gc)(r.id,r,(function(){a.props.dispatch(Object(U.ub)())}),(function(e){a.props.dispatch(Object(U.N)()),e&&e.success&&a.disableTriggerMemberEdit(null,r,t)}))):a.props.dispatch(Object(U.tb)("Please input message content"))})),Object(d.a)(Object(i.a)(a),"changeTriggerUser",(function(e,t,r){var c=a.state.triggerUser,n=S(S({},t),{},{enabled:e.target.checked});c[r]=S(S({},c[r]),n),a.setState({triggerUser:c},(function(){a.props.dispatch(Object(T.hc)(t.id,n,null,null))}))})),Object(d.a)(Object(i.a)(a),"changeTriggerMember",(function(e,t,r){var c=a.state.triggerMember,n=S(S({},t),{},{enabled:e.target.checked});c[r]=S(S({},c[r]),n),a.setState({triggerMember:c},(function(){a.props.dispatch(Object(T.gc)(t.id,n,null,null))}))})),Object(d.a)(Object(i.a)(a),"enableTriggerUserEdit",(function(e,t,r){e.preventDefault();var c=a.state.triggerUser,n=S(S({},t),{},{editing:!0});c[r]=S(S({},c[r]),n),a.setState({triggerUser:c})})),Object(d.a)(Object(i.a)(a),"enableTriggerMemberEdit",(function(e,t,r){e.preventDefault();var c=a.state.triggerMember,n=S(S({},t),{},{editing:!0});c[r]=S(S({},c[r]),n),a.setState({triggerMember:c})})),Object(d.a)(Object(i.a)(a),"disableTriggerUserEdit",(function(e,t,r){e&&e.preventDefault();var c=a.state.triggerUser,n=S(S({},t),{},{editing:!1});c[r]=S(S({},c[r]),n),a.setState({triggerUser:c})})),Object(d.a)(Object(i.a)(a),"disableTriggerMemberEdit",(function(e,t,r){e&&e.preventDefault();var c=a.state.triggerMember,n=S(S({},t),{},{editing:!1});c[r]=S(S({},c[r]),n),a.setState({triggerMember:c})})),a.state={admins:[],triggerAdmin:[],triggerUser:[],triggerMember:[]},a}return Object(n.a)(r,[{key:"componentDidMount",value:function(){this.getEmailerData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.customModalData,r=e.customModalData;t["add-emailer-admin"]&&t["add-emailer-admin"].render||!r["add-emailer-admin"]||!r["add-emailer-admin"].render||this.getEmailerData()}},{key:"getEmailerData",value:function(){var e=this;this.props.dispatch(Object(T.W)((function(){e.props.dispatch(Object(U.ub)())}),(function(t){e.props.dispatch(Object(U.N)());var r=t.data||{},a=r.admins||[],c=r.triggerAdmin||[],n=r.triggerUser||[],i=r.triggerMember||[];e.setState({admins:a,triggerAdmin:c,triggerUser:n,triggerMember:i})})))}},{key:"renderHeader",value:function(){return Object(a.jsx)("div",{className:"infinite-header",children:Object(a.jsxs)("div",{className:"infinite-headerInner",children:[Object(a.jsx)("div",{className:"c-col-1 c-cols",children:Object(a.jsx)("label",{className:"font-size-14",children:"Email"})}),Object(a.jsx)("div",{className:"c-col-2 c-cols",children:Object(a.jsx)("label",{className:"font-size-14",children:"Action"})})]})})}},{key:"renderAdmins",value:function(){var e=this,t=this.state.admins,r=[];return t&&t.length?(t.forEach((function(t){r.push(Object(a.jsx)("li",{children:Object(a.jsxs)("div",{className:"infinite-row",children:[Object(a.jsx)("div",{className:"c-col-1 c-cols",children:Object(a.jsx)("label",{className:"font-size-14",children:t.email})}),Object(a.jsx)("div",{className:"c-col-2 c-cols",children:Object(a.jsx)("label",{className:"font-size-14",children:Object(a.jsx)("a",{className:"btn btn-danger extra-small btn-fluid-small",onClick:function(){return e.clickRemove(t)},children:"Remove"})})})]})},"proposal_".concat(t.id)))})),Object(a.jsx)("ul",{children:r})):Object(a.jsx)("div",{id:"infinite-no-result",children:Object(a.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderTriggerAdmin",value:function(){var e=this,t=this.state.triggerAdmin,r=[];return t&&t.length&&t.forEach((function(t,c){r.push(Object(a.jsxs)("div",{className:"d-emailer-item",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(C,{checked:!!t.enabled,onChange:function(r){return e.changeTriggerAdmin(r,t,c)},color:"primary"}),Object(a.jsx)("label",{children:t.title})]}),Object(a.jsx)("p",{children:t.content})]},"d-emailer-item-".concat(c)))})),r}},{key:"renderTriggerUser",value:function(){var e=this,t=this.state.triggerUser,r=[];return t&&t.length&&t.forEach((function(t,c){r.push(Object(a.jsxs)("div",{className:"d-emailer-item",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(C,{checked:!!t.enabled,onChange:function(r){return e.changeTriggerUser(r,t,c)},color:"primary"}),Object(a.jsx)("label",{children:t.title})]}),t.editing?Object(a.jsx)("textarea",{value:t.content,onChange:function(r){return e.changeTriggerUserMessage(r,t,c)}}):Object(a.jsx)("p",{children:t.content}),t.editing?Object(a.jsxs)(b.Fragment,{children:[Object(a.jsx)("a",{style:{marginRight:"10px"},className:"btn btn-success small",onClick:function(t){return e.saveTriggerUser(t,c)},children:"Save"}),Object(a.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.disableTriggerUserEdit(r,t,c)},children:"Cancel Edit"})]}):Object(a.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.enableTriggerUserEdit(r,t,c)},children:"Edit Message"})]},"d-emailer-item-".concat(c)))})),r}},{key:"renderTriggerMember",value:function(){var e=this,t=this.state.triggerMember,r=[];return t&&t.length&&t.forEach((function(t,c){r.push(Object(a.jsxs)("div",{className:"d-emailer-item",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(C,{checked:!!t.enabled,onChange:function(r){return e.changeTriggerMember(r,t,c)},color:"primary"}),Object(a.jsx)("label",{children:t.title})]}),t.editing?Object(a.jsx)("textarea",{value:t.content,onChange:function(r){return e.changeTriggerMemberMessage(r,t,c)}}):Object(a.jsx)("p",{children:t.content}),t.editing?Object(a.jsxs)(b.Fragment,{children:[Object(a.jsx)("a",{style:{marginRight:"10px"},className:"btn btn-success small",onClick:function(t){return e.saveTriggerMember(t,c)},children:"Save"}),Object(a.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.disableTriggerMemberEdit(r,t,c)},children:"Cancel Edit"})]}):Object(a.jsx)("a",{className:"btn btn-primary small",onClick:function(r){return e.enableTriggerMemberEdit(r,t,c)},children:"Edit Message"})]},"d-emailer-item-".concat(c)))})),r}},{key:"render",value:function(){var e=this.props.authUser;return e&&e.id?e.is_admin?Object(a.jsxs)("div",{id:"dashboard-emailer-page",children:[Object(a.jsxs)("div",{id:"d-emailer-admin-section",className:"app-infinite-box",children:[Object(a.jsx)("label",{className:"d-block",children:"Emailer Admins"}),Object(a.jsx)("div",{className:"infinite-content",children:Object(a.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(a.jsx)("div",{className:"infinite-body",children:this.renderAdmins()})]})})]}),Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsx)("a",{className:"btn btn-success small btn-fluid",onClick:this.clickAdd,children:"Add"})}),Object(a.jsxs)("div",{className:"d-emailer-item-section",children:[Object(a.jsx)("label",{className:"d-block mb-4",children:"Admin Email Triggers"}),this.renderTriggerAdmin()]}),Object(a.jsxs)("div",{className:"d-emailer-item-section",children:[Object(a.jsx)("label",{className:"d-block mb-4",children:"User Email Triggers"}),this.renderTriggerUser()]}),Object(a.jsxs)("div",{className:"d-emailer-item-section",children:[Object(a.jsx)("label",{className:"d-block mb-4",children:"Member Email Triggers"}),this.renderTriggerMember()]})]}):Object(a.jsx)(u.a,{to:"/"}):null}}]),r}(b.Component);t.default=Object(g.b)((function(e){return{authUser:e.global.authUser,settings:e.global.settings,customModalData:e.global.customModalData}}))(Object(u.g)($))}}]);
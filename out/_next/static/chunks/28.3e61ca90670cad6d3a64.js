(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{fXsd:function(e,t,c){"use strict";c.r(t);var s=c("nKUr"),n=c("1OyB"),i=c("vuIU"),a=c("JX7q"),l=c("Ji7U"),r=c("md7G"),o=c("foSv"),d=c("rePB"),j=c("q1tI"),u=c("Ty5D"),m=c("/MKj"),b=(c("fmcQ"),c("KQm4")),h=c("wd/R"),f=c.n(h),O=c("e+cM"),p=c("LADp"),v=(c("FzAz"),c("ZpDd"));function g(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,s)}return c}function x(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?g(Object(c),!0).forEach((function(t){Object(d.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(o.a)(e);if(t){var n=Object(o.a)(this).constructor;c=Reflect.construct(s,arguments,n)}else c=s.apply(this,arguments);return Object(r.a)(this,c)}}var _=function(e){Object(l.a)(c,e);var t=N(c);function c(e){var s;return Object(n.a)(this,c),s=t.call(this,e),Object(d.a)(Object(a.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(d.a)(Object(a.a)(s),"togglePermissions",(function(e,t,c){var n=e.permissions.find((function(e){return e.name===t}));if(n){n.is_permission=1===+n.is_permission?0:1;var i=s.state.data,a=i.findIndex((function(t){return t.id===e.id}));i[a]=e,s.setState({data:Object(b.a)(i)}),s.props.dispatch(Object(p.n)({id:e.id,permissions:Object(d.a)({},t,c?1:0)},(function(){}),(function(){})))}})),Object(d.a)(Object(a.a)(s),"askRevokeAdmin",(function(e){s.props.dispatch(Object(v.T)("ask-revoke-admin",e))})),Object(d.a)(Object(a.a)(s),"askUndoRevokeAdmin",(function(e){s.props.dispatch(Object(v.T)("ask-undo-revoke-admin",e))})),Object(d.a)(Object(a.a)(s),"doResetPWAdmin",(function(e){s.props.dispatch(Object(p.Zb)({id:e},(function(){s.props.dispatch(Object(v.wb)())}),(function(e){s.props.dispatch(Object(v.P)()),e.success&&s.props.dispatch(Object(v.vb)("Reset Password successfully!","success"))})))})),s.state={loading:!1,data:[],sort_key:"id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1,params:{}},s.$elem=null,s.timer=null,s}return Object(i.a)(c,[{key:"componentDidMount",value:function(){var e=this.props.authUser;e&&e.id&&this.startTracking(),this.getData()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.authUser;e.authUser&&e.authUser.id||!t||!t.id||this.startTracking(),this.props.reloadAdminTeam&&this.props.reloadAdminTeam!==e.reloadAdminTeam&&(this.props.dispatch(Object(v.N)(!1)),this.reloadTable())}},{key:"startTracking",value:function(){this.$elem=document.getElementById("milestone-all-scroll-track"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,n=t.finished,i=t.page_id;c||s||n||this.setState({page_id:i+1},(function(){e.getData(!1)}))}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,data:[],finished:!1},(function(){e.getData()}))}},{key:"getData",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,n=c.loading,i=c.finished,a=c.sort_key,l=c.sort_direction,r=c.search,o=c.page_id,d=c.data;if(!(n||s||i)){var j=x({sort_key:a,sort_direction:l,search:r,page_id:o,limit:15},this.state.params);this.props.dispatch(Object(p.Y)(j,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.users||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,data:[].concat(Object(b.a)(d),Object(b.a)(c))})})))}}},{key:"doResendInvitedEmail",value:function(e){var t=this;this.props.dispatch(Object(p.Wb)({id:e},(function(){t.props.dispatch(Object(v.wb)())}),(function(e){t.props.dispatch(Object(v.P)()),e.success&&t.props.dispatch(Object(v.vb)("Resend Email successfully!","success"))})))}},{key:"renderAdminStatus",value:function(e){var t=this,c="";return"active"===e.admin_status?c="color-success":"revoked"===e.admin_status&&(c="color-danger"),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{className:"".concat(c," text-capitalize"),children:e.admin_status}),"invited"===e.admin_status&&Object(s.jsx)("a",{className:"mt-3 text-underline",style:{cursor:"pointer"},onClick:function(){return t.doResendInvitedEmail(e.id)},children:"resend"})]})}},{key:"getPermission",value:function(e,t){var c;return!(null===(c=e.permissions.find((function(e){return e.name===t})))||void 0===c||!c.is_permission)}},{key:"renderResult",value:function(){var e=this,t=this.state.data,c=[];return t&&t.length?(t.forEach((function(t){c.push(Object(s.jsx)("li",{children:Object(s.jsxs)("div",{className:"infinite-row align-items-center d-flex py-3 font-size-14 font-weight-700",children:[Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("p",{children:f()(t.created_at).format("M/D/YYYY h:mm A")})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("p",{children:t.is_super_admin?"Super Admin":"Admin"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:e.renderAdminStatus(t)}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("p",{children:t.email})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("p",{children:t.last_login_at?f()(t.last_login_at).format("M/D/YYYY h:mm A"):""})}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsx)("p",{children:t.last_login_ip_address})}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"users"),onChange:function(c){return e.togglePermissions(t,"users",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-8 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"new_proposal"),onChange:function(c){return e.togglePermissions(t,"new_proposal",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-9 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"move_to_formal"),onChange:function(c){return e.togglePermissions(t,"move_to_formal",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-10 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"grants"),onChange:function(c){return e.togglePermissions(t,"grants",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-11 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"milestones"),onChange:function(c){return e.togglePermissions(t,"milestones",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-12 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"global_settings"),onChange:function(c){return e.togglePermissions(t,"global_settings",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-13 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"emailer"),onChange:function(c){return e.togglePermissions(t,"emailer",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-14 c-cols",children:!t.is_super_admin&&Object(s.jsx)(O.j,{value:e.getPermission(t,"accounting"),onChange:function(c){return e.togglePermissions(t,"accounting",c.target.checked)}})}),Object(s.jsx)("div",{className:"c-col-15 c-cols",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{className:"btn btn-primary small mb-2",onClick:function(){return e.doResetPWAdmin(t.id)},children:"Reset Password"}),!t.is_super_admin&&"revoked"!==t.admin_status&&Object(s.jsx)("button",{className:"btn btn-danger small",onClick:function(){return e.askRevokeAdmin(t)},children:"Revoke"}),!t.is_super_admin&&"revoked"===t.admin_status&&Object(s.jsx)("button",{className:"btn btn-success small",onClick:function(){return e.askUndoRevokeAdmin(t)},children:"Undo"})]})})]})},"all_mile_".concat(t.id)))})),Object(s.jsx)("ul",{children:c})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"render",value:function(){var e=this.state.loading;return Object(s.jsx)("div",{className:"teams-table infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Added Date"})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Type"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Status"})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Email"})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Last Login"})}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"IP"})}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Users"})}),Object(s.jsx)("div",{className:"c-col-8 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"New Proposals"})}),Object(s.jsx)("div",{className:"c-col-9 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Move to Formal"})}),Object(s.jsx)("div",{className:"c-col-10 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Grants"})}),Object(s.jsx)("div",{className:"c-col-11 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Milestones"})}),Object(s.jsx)("div",{className:"c-col-12 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Global settings"})}),Object(s.jsx)("div",{className:"c-col-13 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Emailer"})}),Object(s.jsx)("div",{className:"c-col-14 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Accounting"})}),Object(s.jsx)("div",{className:"c-col-15 c-cols",children:Object(s.jsx)("label",{className:"font-size-14"})})]})}),Object(s.jsx)("div",{className:"infinite-body",id:"milestone-all-scroll-track",children:e?Object(s.jsx)(O.f,{}):this.renderResult()})]})})}}]),c}(j.Component),k=Object(m.b)((function(e){return{authUser:e.global.authUser,reloadAdminTeam:e.admin.reloadAdminTeam}}))(Object(u.g)(_)),y=c("s/m+");function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(o.a)(e);if(t){var n=Object(o.a)(this).constructor;c=Reflect.construct(s,arguments,n)}else c=s.apply(this,arguments);return Object(r.a)(this,c)}}var A=function(e){Object(l.a)(c,e);var t=P(c);function c(e){var s;return Object(n.a)(this,c),s=t.call(this,e),Object(d.a)(Object(a.a)(s),"openAddAdminDialog",(function(){s.props.dispatch(Object(v.T)("add-admin-box"))})),s}return Object(i.a)(c,[{key:"render",value:function(){var e=this.props.authUser;return e&&e.id?e.is_admin?Object(s.jsx)("div",{id:"team-page",children:Object(s.jsx)(y.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:Object(s.jsxs)("section",{className:"app-infinite-box mb-4",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsx)("label",{children:"Teams"}),Object(s.jsx)("button",{className:"my-1 btn btn-primary btn-download small ml-2",onClick:this.openAddAdminDialog,children:"+ New Admin"})]}),Object(s.jsx)(k,{})]})})}):Object(s.jsx)(u.a,{to:"/"}):null}}]),c}(j.Component);t.default=Object(m.b)((function(e){return{authUser:e.global.authUser}}))(Object(u.g)(A))}}]);
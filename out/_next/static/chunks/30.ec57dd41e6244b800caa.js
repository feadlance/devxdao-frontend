(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{mCOC:function(e,t,i){"use strict";i.r(t);var s=i("nKUr"),c=i("1OyB"),n=i("vuIU"),a=i("Ji7U"),r=i("md7G"),l=i("foSv"),o=i("q1tI"),d=i("/MKj"),u=i("o0o1"),h=i.n(u),p=i("HaE+"),j=i("JX7q"),m=i("rePB"),b=i("Ty5D"),f=i("s/m+"),v=i("YW6W"),O=i("ZpDd"),g=i("55Ip"),x=(i("v1O5"),i("LADp"));function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){Object(m.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;i=Reflect.construct(s,arguments,c)}else i=s.apply(this,arguments);return Object(r.a)(this,i)}}var N=function(e){Object(a.a)(i,e);var t=k(i);function i(){var e;Object(c.a)(this,i);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n)),Object(m.a)(Object(j.a)(e),"clickRegister",function(){var t=Object(p.a)(h.a.mark((function t(i){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.preventDefault(),s=e.props.history,v.a.storeUser({}),t.next=5,e.props.dispatch(Object(O.Q)({}));case 5:s.push("/register/form");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(m.a)(Object(j.a)(e),"dismiss",(function(t){t.preventDefault(),e.props.dispatch(Object(x.E)((function(){e.props.dispatch(Object(O.ub)())}),(function(t){if(t.success){var i=e.props.authUser;i.press_dismiss=1,e.props.dispatch(Object(O.Q)(_({},i)))}e.props.dispatch(Object(O.N)())})))})),e}return Object(n.a)(i,[{key:"render",value:function(){var e=this.props.authUser;return e&&e.id?e.is_admin||e.press_dismiss?null:Object(s.jsx)(f.Fade,{distance:"20px",right:!0,duration:200,delay:500,children:Object(s.jsxs)("div",{id:"app-newgrant-box",className:"new-member",children:[Object(s.jsx)("img",{src:"/parts.png",alt:""}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{className:"font-weight-700",children:"Welcome to the portal! Are you here to submit a grant request?"}),Object(s.jsx)("p",{className:"font-size-12",children:'Click the "My Proposals" tab to the left, then the button for "New Grant Proposal" to start the process. Please be aware that grants require a 100 Euro DOS Fee for all applications.'})]}),Object(s.jsxs)("div",{className:"d-flex flex-column actions",children:[Object(s.jsx)(g.b,{to:"/app/proposals",className:"btn btn-primary less-small mb-1",children:"Request grant"}),Object(s.jsx)("button",{className:"btn btn-primary less-small mt-1",onClick:this.dismiss,children:"Dismiss alert"})]})]})}):null}}]),i}(o.Component),T=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(b.g)(N)),S=i("KQm4"),R=i("e+cM"),w=(i("bSi4"),i("wd/R")),z=i.n(w),I=function(e){var t=e.lastTime,i=e.isCountUp,c=Object(o.useState)(""),n=c[0],a=c[1],r=Object(o.useState)(null),l=r[0],d=r[1];Object(o.useEffect)((function(){var e=u();if(e>0){a(z.a.duration(e));var t=setInterval((function(){var e=u();a(z.a.duration(e))}),1e3);d(t)}return function(){clearInterval(l)}}),[]);var u=function(){return i?z()().diff(t):t.diff(z()())},h=function(e){return e.toString().padStart(2,"0")};return Object(s.jsxs)(s.Fragment,{children:[n&&Object(s.jsxs)("p",{children:[h(n.days()),":",h(n.hours()),":",h(n.minutes()),":",h(n.seconds())]}),!n&&Object(s.jsx)("p",{children:"00:00:00:00"})]})};function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;i=Reflect.construct(s,arguments,c)}else i=s.apply(this,arguments);return Object(r.a)(this,i)}}var P=i("wd/R"),U=function(e){Object(a.a)(i,e);var t=C(i);function i(e){var s;return Object(c.a)(this,i),s=t.call(this,e),Object(m.a)(Object(j.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(m.a)(Object(j.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,votes:[],sort_key:"vote.id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(n.a)(i,[{key:"componentDidMount",value:function(){this.startTracking(),this.getVotes()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.formalBallotTableStatus;!e.formalBallotTableStatus&&t&&(this.reloadTable(),this.props.dispatch(Object(O.cb)(!1)))}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-formal-ballots-sectionBody"),this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,votes:[],finished:!1},(function(){e.getVotes()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,i=t.calling,s=t.loading,c=t.finished,n=t.page_id;i||s||c||this.setState({page_id:n+1},(function(){e.getVotes(!1)}))}},{key:"getVotes",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this.state,s=i.calling,c=i.loading,n=i.finished,a=i.sort_key,r=i.sort_direction,l=i.search,o=i.page_id,d=i.votes;if(!(c||s||n)){var u={sort_key:a,sort_direction:r,search:l,page_id:o};this.props.dispatch(Object(x.O)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var i=t.votes||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,votes:[].concat(Object(S.a)(d),Object(S.a)(i))})})))}}},{key:"clickRow",value:function(e){var t=this.props,i=t.authUser,s=t.history;i.is_member||i.is_admin||i.id==e.user_id?(i.is_admin||i.id==e.user_id||i.is_member)&&s.push("/app/proposal/".concat(e.proposal_id)):(i.is_participant||i.is_guest)&&(this.props.dispatch(Object(O.Y)({"voting-access-alert":{render:!0,title:"Sorry, only voting associates may access a live vote."}})),this.props.dispatch(Object(O.R)("custom-global-modal")))}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderTimeRemaining",value:function(e){var t=0,i=this.props.settings;"grant"==e.content_type?"min"==i.time_unit_formal?t=parseInt(i.time_formal):"hour"==i.time_unit_formal?t=60*parseInt(i.time_formal):"day"==i.time_unit_formal&&(t=24*parseInt(i.time_formal)*60):"simple"==e.content_type?"min"==i.time_unit_simple?t=parseInt(i.time_simple):"hour"==i.time_unit_simple?t=60*parseInt(i.time_simple):"day"==i.time_unit_simple&&(t=24*parseInt(i.time_simple)*60):"milestone"==e.content_type&&("min"==i.time_unit_milestone?t=parseInt(i.time_milestone):"hour"==i.time_unit_milestone?t=60*parseInt(i.time_milestone):"day"==i.time_unit_milestone&&(t=24*parseInt(i.time_milestone)*60));var c=P(e.created_at).add(t,"minutes");return Object(s.jsx)(I,{lastTime:c})}},{key:"renderVotes",value:function(){var e=this,t=this.state.votes,i=[];return t&&t.length?(t.forEach((function(t,c){i.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:P(t.created_at).fromNow()})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:e.renderTimeRemaining(t)})})]})},"vote_".concat(c)))})),Object(s.jsx)("ul",{children:i})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-12",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,i=t.sort_key,c=t.sort_direction;return i!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==c?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,i=this.state,s=i.sort_key,c=i.sort_direction;s==e?c="asc"==c?"desc":"asc":(s=e,c="desc"),this.setState({sort_key:s,sort_direction:c},(function(){t.reloadTable()}))}},{key:"render",value:function(){var e=this,t=this.state,i=t.loading,c=t.search,n=this.props.authUser;return n&&n.id?Object(s.jsx)(f.Fade,{distance:"20px",right:!0,duration:500,delay:500,children:Object(s.jsxs)("section",{id:"app-formal-ballots-section",className:"app-infinite-box",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsx)("label",{children:"Active Formal Ballots"}),Object(s.jsx)("input",{type:"text",value:c,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Submitted"}),this.renderTriangle("vote.created_at")]}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12",children:"Time Remaining"})})]})}),Object(s.jsx)("div",{className:"infinite-body",id:"app-formal-ballots-sectionBody",children:i?Object(s.jsx)(R.e,{}):this.renderVotes()})]})})]})}):null}}]),i}(o.Component),D=Object(d.b)((function(e){return{authUser:e.global.authUser,formalBallotTableStatus:e.admin.formalBallotTableStatus,settings:e.global.settings}}))(Object(b.g)(U));i("AxTd");function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;i=Reflect.construct(s,arguments,c)}else i=s.apply(this,arguments);return Object(r.a)(this,i)}}var B=i("wd/R"),H=function(e){Object(a.a)(i,e);var t=$(i);function i(e){var s;return Object(c.a)(this,i),s=t.call(this,e),Object(m.a)(Object(j.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(m.a)(Object(j.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,votes:[],sort_key:"vote.id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(n.a)(i,[{key:"componentDidMount",value:function(){this.startTracking(),this.getVotes()}},{key:"componentDidUpdate",value:function(e){var t=this.props.informalBallotTableStatus;!e.informalBallotTableStatus&&t&&(this.reloadTable(),this.props.dispatch(Object(O.fb)(!1)))}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-informal-ballots-sectionBody"),this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,votes:[],finished:!1},(function(){e.getVotes()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,i=t.calling,s=t.loading,c=t.finished,n=t.page_id;i||s||c||this.setState({page_id:n+1},(function(){e.getVotes(!1)}))}},{key:"getVotes",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this.state,s=i.calling,c=i.loading,n=i.finished,a=i.sort_key,r=i.sort_direction,l=i.search,o=i.page_id,d=i.votes;if(!(c||s||n)){var u={sort_key:a,sort_direction:r,search:l,page_id:o};this.props.dispatch(Object(x.P)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var i=t.votes||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,votes:[].concat(Object(S.a)(d),Object(S.a)(i))})})))}}},{key:"clickRow",value:function(e){var t=this.props,i=t.authUser,s=t.history;i.is_member||i.is_admin?s.push("/app/proposal/".concat(e.proposal_id)):i.is_participant&&(e.user_id==i.id?s.push("/app/proposal/".concat(e.proposal_id)):(this.props.dispatch(Object(O.Y)({"voting-access-alert":{render:!0,title:"Sorry, only voting associates may access a live vote."}})),this.props.dispatch(Object(O.R)("custom-global-modal"))))}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderTimeRemaining",value:function(e){var t=0,i=this.props.settings;"grant"==e.content_type?"min"==i.time_unit_informal?t=parseInt(i.time_informal):"hour"==i.time_unit_informal?t=60*parseInt(i.time_informal):"day"==i.time_unit_informal&&(t=24*parseInt(i.time_informal)*60):"simple"==e.content_type?"min"==i.time_unit_simple?t=parseInt(i.time_simple):"hour"==i.time_unit_simple?t=60*parseInt(i.time_simple):"day"==i.time_unit_simple&&(t=24*parseInt(i.time_simple)*60):"milestone"==e.content_type&&("min"==i.time_unit_milestone?t=parseInt(i.time_milestone):"hour"==i.time_unit_milestone?t=60*parseInt(i.time_milestone):"day"==i.time_unit_milestone&&(t=24*parseInt(i.time_milestone)*60));var c=B(e.created_at).add(t,"minutes");return Object(s.jsx)(I,{lastTime:c})}},{key:"renderVotes",value:function(){var e=this,t=this.state.votes,i=[];return t&&t.length?(t.forEach((function(t,c){i.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-12",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:B(t.created_at).fromNow()})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:e.renderTimeRemaining(t)})})]})},"vote_".concat(c)))})),Object(s.jsx)("ul",{children:i})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-12",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,i=t.sort_key,c=t.sort_direction;return i!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==c?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,i=this.state,s=i.sort_key,c=i.sort_direction;s==e?c="asc"==c?"desc":"asc":(s=e,c="desc"),this.setState({sort_key:s,sort_direction:c},(function(){t.reloadTable()}))}},{key:"render",value:function(){var e=this,t=this.state,i=t.loading,c=t.search,n=this.props.authUser;return n&&n.id?Object(s.jsx)(f.Fade,{distance:"20px",right:!0,duration:500,delay:400,children:Object(s.jsxs)("section",{id:"app-informal-ballots-section",className:"app-infinite-box",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsx)("label",{children:"Active Informal Ballots"}),Object(s.jsx)("input",{type:"text",value:c,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Submitted"}),this.renderTriangle("vote.created_at")]}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12",children:"Time Remaining"})})]})}),Object(s.jsx)("div",{className:"infinite-body",id:"app-informal-ballots-sectionBody",children:i?Object(s.jsx)(R.e,{}):this.renderVotes()})]})})]})}):null}}]),i}(o.Component),E=Object(d.b)((function(e){return{authUser:e.global.authUser,informalBallotTableStatus:e.admin.informalBallotTableStatus,settings:e.global.settings}}))(Object(b.g)(H)),F=i("ahwF"),V=i("syaQ"),M=i("I6fM");i("yh/M");function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;i=Reflect.construct(s,arguments,c)}else i=s.apply(this,arguments);return Object(r.a)(this,i)}}var L=i("wd/R"),Y=function(e){Object(a.a)(i,e);var t=A(i);function i(e){var s;return Object(c.a)(this,i),s=t.call(this,e),Object(m.a)(Object(j.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(m.a)(Object(j.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,proposals:[],sort_key:"proposal.id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(n.a)(i,[{key:"componentDidMount",value:function(){this.startTracking(),this.getProposals()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-proposals-sectionBody"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,proposals:[],finished:!1},(function(){e.getProposals()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,i=t.calling,s=t.loading,c=t.finished,n=t.page_id;i||s||c||this.setState({page_id:n+1},(function(){e.getProposals(!1)}))}},{key:"getProposals",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this.state,s=i.calling,c=i.loading,n=i.finished,a=i.sort_key,r=i.sort_direction,l=i.search,o=i.page_id,d=i.proposals;if(!(c||s||n)){var u={sort_key:a,sort_direction:r,search:l,page_id:o,limit:20};this.props.dispatch(Object(x.N)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var i=t.proposals||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,proposals:[].concat(Object(S.a)(d),Object(S.a)(i))})})))}}},{key:"clickRow",value:function(e){var t=this.props,i=t.history,s=t.authUser;if(s&&s.is_admin)i.push("/app/proposal/".concat(e.id));else{if("approved"!=e.status)return;s.is_member?i.push("/app/proposal/".concat(e.id)):e.votes&&e.votes.length||i.push("/app/proposal/".concat(e.id))}}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderProposals",value:function(){var e=this,t=this.state.proposals,i=[];return t&&t.length?(t.forEach((function(t,c){i.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:t.id})}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",children:[Object(s.jsx)("label",{className:"font-size-14 font-weight-700",children:e.renderTitle(t)}),Object(s.jsx)("p",{className:"font-size-12",children:v.a.getExcerpt(t.short_description)})]}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsxs)("div",{className:"proposal-image-wrap",children:[Object(s.jsx)("div",{children:Object(s.jsx)(F.a,{size:20})}),Object(s.jsx)("span",{className:"font-size-12",children:t.comments})]})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsxs)("div",{className:"proposal-image-wrap",children:[Object(s.jsx)("div",{children:Object(s.jsx)(V.a,{size:20})}),Object(s.jsx)("span",{className:"font-size-12",children:t.changes})]})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsxs)("label",{className:"font-size-14",children:[L(t.created_at).local().format("M/D/YYYY")," ",L(t.created_at).local().format("h:mm A")]})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)(I,{lastTime:L(t.created_at),isCountUp:!0})})]})},"proposal_".concat(c)))})),Object(s.jsx)("ul",{children:i})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,i=t.sort_key,c=t.sort_direction;return i!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==c?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,i=this.state,s=i.sort_key,c=i.sort_direction;s==e?c="asc"==c?"desc":"asc":(s=e,c="desc"),this.setState({sort_key:s,sort_direction:c},(function(){t.reloadTable()}))}},{key:"render",value:function(){var e=this,t=this.state,i=t.loading,c=t.search;return Object(s.jsx)(f.Fade,{distance:"20px",bottom:!0,duration:200,delay:700,children:Object(s.jsxs)("section",{id:"app-proposals-section",className:"app-infinite-box",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsxs)("label",{children:["Active Discussions\xa0\xa0",Object(s.jsx)(M.a,{size:16})]}),Object(s.jsx)("input",{type:"text",value:c,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("proposal.comments")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Comments"}),this.renderTriangle("proposal.comments")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("proposal.changes")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Changes"}),this.renderTriangle("proposal.changes")]}),Object(s.jsxs)("div",{className:"c-col-4 c-cols",onClick:function(){return e.clickHeader("proposal.created_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Date"}),this.renderTriangle("proposal.created_at")]}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Time Active"})})]})}),Object(s.jsx)("div",{className:"infinite-body",id:"app-proposals-sectionBody",children:i?Object(s.jsx)(R.e,{}):this.renderProposals()})]})})]})})}}]),i}(o.Component),W=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(b.g)(Y)),q=i("H2Bi"),G=i("5svO");i("wroK");function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,s=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;i=Reflect.construct(s,arguments,c)}else i=s.apply(this,arguments);return Object(r.a)(this,i)}}var K=function(e){Object(a.a)(i,e);var t=J(i);function i(){return Object(c.a)(this,i),t.apply(this,arguments)}return Object(n.a)(i,[{key:"renderContent",value:function(){var e=this.props.authUser;return e&&e.is_admin?Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(q.a,{}),Object(s.jsx)(G.a,{})]}):Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(T,{}),Object(s.jsxs)("div",{id:"app-ballots-wrap",children:[Object(s.jsx)(E,{}),Object(s.jsx)(D,{})]}),Object(s.jsx)(W,{})]})}},{key:"render",value:function(){var e=this.props.authUser;return e&&e.id?Object(s.jsx)("div",{id:"app-main-page",children:this.renderContent()}):null}}]),i}(o.Component);t.default=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(K)}}]);
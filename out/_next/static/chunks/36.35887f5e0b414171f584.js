(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[36],{qSTb:function(e,t,s){"use strict";s.r(t);var c=s("nKUr"),i=s("1OyB"),n=s("vuIU"),r=s("JX7q"),a=s("Ji7U"),l=s("md7G"),o=s("foSv"),d=s("rePB"),j=s("q1tI"),h=s("/MKj"),b=s("Ty5D"),p=s("s/m+"),u=s("ZpDd"),m=s("LADp"),O=(s("T89c"),s("e+cM"));function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,c=Object(o.a)(e);if(t){var i=Object(o.a)(this).constructor;s=Reflect.construct(c,arguments,i)}else s=c.apply(this,arguments);return Object(l.a)(this,s)}}var f=function(e){Object(a.a)(s,e);var t=x(s);function s(e){var c;return Object(i.a)(this,s),c=t.call(this,e),Object(d.a)(Object(r.a)(c),"openRejectionDialog",(function(){c.props.dispatch(Object(u.T)("milestone-rejection",{milestoneId:c.state.id}))})),c.state={id:null,data:{}},c}return Object(n.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.id;this.setState({id:t}),this.getDetail(e.id)}},{key:"getDetail",value:function(e){var t=this;this.props.dispatch(Object(m.Hb)(e,(function(){}),(function(s){if(s.success){var c=s.milestoneReview,i=c.milestones.findIndex((function(t){return+t.id===+e}));c.milestoneIndex=i+1,t.setState({data:c})}})))}},{key:"doApprove",value:function(){var e=this,t=this.props.history;this.props.dispatch(Object(m.k)(this.state.id,(function(){e.props.dispatch(Object(u.wb)())}),(function(s){e.props.dispatch(Object(u.P)()),s.success&&(e.props.dispatch(Object(u.vb)("You've successfully approved this milestone","success")),t.push("/app/milestones"))})))}},{key:"render",value:function(){var e,t=this,s=this.props.authUser,i=this.state.data;return s&&s.id?s.is_admin?Object(c.jsx)("div",{id:"milestones-page",className:"h-100",children:Object(c.jsxs)(p.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:[Object(c.jsx)(O.h,{title:"Milestones review for ".concat(i.proposal_id,"-").concat(i.milestoneIndex)}),Object(c.jsx)("section",{className:"app-infinite-box pb-5 pr-4",children:Object(c.jsxs)("div",{className:"pt-5 pl-5",children:[Object(c.jsx)("h4",{className:"pb-3",children:"Summary"}),Object(c.jsx)("div",{children:Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pr-2",children:"Times submitted:"}),Object(c.jsx)("td",{children:i.time_submit})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pr-2",children:"OP Email:"}),Object(c.jsx)("td",{children:i.email})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pr-2",children:"Proposal number:"}),Object(c.jsx)("td",{children:i.proposal_id})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pr-2",children:"Proposal title:"}),Object(c.jsx)("td",{children:i.proposal_title})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pr-2",children:"Proposal status:"}),Object(c.jsx)("td",{children:i.proposal_status})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pr-2",children:"Milestones in this proposal:"}),Object(c.jsx)("td",{children:null===(e=i.milestones)||void 0===e?void 0:e.length})]})]})})}),Object(c.jsx)("h4",{className:"pt-5 pb-3",children:"User submission"}),Object(c.jsxs)("div",{className:"pb-5",children:[Object(c.jsxs)("div",{className:"c-form-row",children:[Object(c.jsx)("label",{children:"Show details of what will be delivered"}),Object(c.jsx)("p",{className:"font-weight-700",children:i.details})]}),Object(c.jsxs)("div",{className:"c-form-row",children:[Object(c.jsx)("label",{children:"Show acceptance criteria"}),Object(c.jsx)("p",{className:"font-weight-700",children:i.criteria})]}),Object(c.jsxs)("div",{className:"c-form-row",children:[Object(c.jsx)("label",{children:"Grant portion released"}),Object(c.jsx)("p",{className:"font-weight-700",children:i.grant})]}),Object(c.jsxs)("div",{className:"c-form-row",children:[Object(c.jsx)("label",{children:"Please enter the URL of the repository or drive where the completed work has been made available."}),Object(c.jsx)("p",{className:"font-weight-700",children:i.url})]}),Object(c.jsxs)("div",{className:"c-form-row",children:[Object(c.jsx)("label",{children:"Please provide comments and notes regarding the completion of the work. If this is the second or further submission of this milestone, please explain what changes you have made since the last submission."}),Object(c.jsx)("p",{className:"font-weight-700",children:i.comment})]})]}),Object(c.jsxs)("div",{className:"text-right",children:[Object(c.jsx)("button",{className:"btn btn-white-outline mr-3",onClick:this.openRejectionDialog,children:"Deny and email message"}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){return t.doApprove()},children:"Approve and start vote"})]})]})})]})}):Object(c.jsx)(b.a,{to:"/"}):null}}]),s}(j.Component);t.default=Object(h.b)((function(e){return{authUser:e.global.authUser}}))(Object(b.g)(f))}}]);
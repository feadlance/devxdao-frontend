(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[48],{EYTY:function(e,t,s){"use strict";s.r(t);var c=s("nKUr"),n=s("o0o1"),r=s.n(n),a=s("HaE+"),i=s("1OyB"),l=s("vuIU"),o=s("JX7q"),d=s("Ji7U"),u=s("md7G"),j=s("foSv"),b=s("rePB"),p=s("q1tI"),h=s("/MKj"),f=s("Ty5D"),m=s("e+cM"),O=s("ZpDd"),x=s("LADp"),v=s("KQm4"),g=s("s/m+"),N=s("YW6W");s("mPfQ");function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,c=Object(j.a)(e);if(t){var n=Object(j.a)(this).constructor;s=Reflect.construct(c,arguments,n)}else s=c.apply(this,arguments);return Object(u.a)(this,s)}}var k=s("wd/R"),_=function(e){Object(d.a)(s,e);var t=y(s);function s(e){var c;return Object(i.a)(this,s),(c=t.call(this,e)).state={loading:!1,proposals:[],sort_key:"proposal.id",sort_direction:"desc",calling:!1},c.timer=null,c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getProposals()}},{key:"reloadTable",value:function(){var e=this;this.setState({proposals:[]},(function(){e.getProposals()}))}},{key:"getProposals",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=this.state,c=s.calling,n=s.loading,r=s.sort_key,a=s.sort_direction,i=s.proposals,l=this.props.userId;if(!n&&!c){var o={sort_key:r,sort_direction:a};this.props.dispatch(Object(x.wb)(l,o,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var s=t.proposals||[];e.setState({loading:!1,calling:!1,proposals:[].concat(Object(v.a)(i),Object(v.a)(s))})})))}}},{key:"clickRow",value:function(e){this.props.history.push("/app/proposal/".concat(e.id))}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderInformalResult",value:function(e){var t=e.votes;if(!t||!t.length)return null;var s=t[0];return"completed"==s.status?"success"==s.result?this.renderStatusLabel("Passed","success"):"no-quorum"==s.result?this.renderStatusLabel("No Quorum","danger"):this.renderStatusLabel("Failed","danger"):null}},{key:"renderFormalResult",value:function(e){var t=e.votes;if(!t||!t.length||t.length<2)return null;var s=t[1];return"completed"==s.status?"success"==s.result?this.renderStatusLabel("Passed","success"):"no-quorum"==s.result?this.renderStatusLabel("No Quorum","danger"):this.renderStatusLabel("Failed","danger"):null}},{key:"renderStatusLabel",value:function(e,t){return Object(c.jsx)("label",{className:"font-size-14 color-".concat(t),children:e})}},{key:"renderStatus",value:function(e){var t=e.dos_paid;if("payment"==e.status)return t?this.renderStatusLabel("Payment Clearing","info"):this.renderStatusLabel("Payment Waiting","info");if("pending"==e.status)return this.renderStatusLabel("Pending","primary");if("denied"==e.status)return this.renderStatusLabel("Denied","danger");if("completed"==e.status)return this.renderStatusLabel("Completed","");if("approved"==e.status){if(e.votes&&e.votes.length){if(e.votes.length>1){var s=e.votes[1];return"active"==s.status?this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Formal Voting",Object(c.jsx)("br",{}),"Live"]}),"success"):"success"==s.result?this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Formal Voting",Object(c.jsx)("br",{}),"Passed"]}),"success"):"no-quorum"==s.result?this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Formal Voting",Object(c.jsx)("br",{}),"No Quorum"]}),"danger"):this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Formal Voting",Object(c.jsx)("br",{}),"Failed"]}),"danger")}var n=e.votes[0];return"active"==n.status?this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Informal Voting",Object(c.jsx)("br",{}),"Live"]}),"success"):"success"==n.result?this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Informal Voting",Object(c.jsx)("br",{}),"Passed"]}),"success"):"no-quorum"==n.result?this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Informal Voting",Object(c.jsx)("br",{}),"No Quorum"]}),"danger"):this.renderStatusLabel(Object(c.jsxs)(p.Fragment,{children:["Informal Voting",Object(c.jsx)("br",{}),"Failed"]}),"danger")}return this.renderStatusLabel("In Discussion","success")}return null}},{key:"renderProposals",value:function(){var e=this,t=this.state.proposals,s=[];return t&&t.length?(t.forEach((function(t){s.push(Object(c.jsx)("li",{children:Object(c.jsxs)("div",{className:"infinite-row",children:[Object(c.jsx)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickRow(t)},children:Object(c.jsx)("label",{className:"font-size-14 font-weight-700",children:t.id})}),Object(c.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickRow(t)},children:[Object(c.jsx)("label",{className:"font-size-14 font-weight-700",children:e.renderTitle(t)}),Object(c.jsx)("p",{className:"font-size-12",children:N.a.getExcerpt(t.short_description||t.member_reason)})]}),Object(c.jsx)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickRow(t)},children:Object(c.jsx)("label",{className:"font-size-14",children:"grant"==t.type?"Grant":"Simple"})}),Object(c.jsx)("div",{className:"c-col-4 c-cols",children:e.renderStatus(t)}),Object(c.jsx)("div",{className:"c-col-5 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderInformalResult(t)}),Object(c.jsx)("div",{className:"c-col-6 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderFormalResult(t)}),Object(c.jsx)("div",{className:"c-col-7 c-cols",onClick:function(){return e.clickRow(t)},children:Object(c.jsxs)("label",{className:"font-size-14",children:[k(t.created_at).local().format("M/D/YYYY")," ",k(t.created_at).local().format("h:mm A")]})})]})},"proposal_".concat(t.id)))})),Object(c.jsx)("ul",{children:s})):Object(c.jsx)("div",{id:"infinite-no-result",children:Object(c.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,s=t.sort_key,n=t.sort_direction;return s!=e?Object(c.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==n?Object(c.jsx)("span",{children:"\u25b2"}):Object(c.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,s=this.state,c=s.sort_key,n=s.sort_direction;c==e?n="asc"==n?"desc":"asc":(c=e,n="desc"),this.setState({sort_key:c,sort_direction:n},(function(){t.reloadTable()}))}},{key:"renderHeader",value:function(){var e=this;return Object(c.jsx)("div",{className:"infinite-header",children:Object(c.jsxs)("div",{className:"infinite-headerInner",children:[Object(c.jsx)("div",{className:"c-col-1 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Proposal #"})}),Object(c.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(c.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(c.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("proposal.type")},children:[Object(c.jsx)("label",{className:"font-size-14",children:"Type"}),this.renderTriangle("proposal.type")]}),Object(c.jsx)("div",{className:"c-col-4 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Status"})}),Object(c.jsx)("div",{className:"c-col-5 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Informal Result"})}),Object(c.jsx)("div",{className:"c-col-6 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Formal Result"})}),Object(c.jsxs)("div",{className:"c-col-7 c-cols",onClick:function(){return e.clickHeader("proposal.created_at")},children:[Object(c.jsx)("label",{className:"font-size-14",children:"Date"}),this.renderTriangle("proposal.created_at")]})]})})}},{key:"render",value:function(){var e=this.state.loading,t=this.props.authUser;return t&&t.id?Object(c.jsx)(g.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:Object(c.jsx)("section",{id:"app-user-proposals-section",className:"app-infinite-box",children:Object(c.jsx)("div",{className:"infinite-content",children:Object(c.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(c.jsx)("div",{className:"infinite-body",children:e?Object(c.jsx)(m.e,{}):this.renderProposals()})]})})})}):null}}]),s}(p.Component),w=Object(h.b)((function(e){return{authUser:e.global.authUser}}))(Object(f.g)(_));s("b3bh");function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,c=Object(j.a)(e);if(t){var n=Object(j.a)(this).constructor;s=Reflect.construct(c,arguments,n)}else s=c.apply(this,arguments);return Object(u.a)(this,s)}}var S=s("wd/R"),z=function(e){Object(d.a)(s,e);var t=R(s);function s(e){var c;return Object(i.a)(this,s),(c=t.call(this,e)).state={loading:!1,items:[],sort_key:"vote_result.id",sort_direction:"desc",calling:!1},c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getItems()}},{key:"getItems",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=this.state,c=s.calling,n=s.loading,r=s.sort_key,a=s.sort_direction,i=s.items,l=this.props.userId;if(!n&&!c){var o={sort_key:r,sort_direction:a};this.props.dispatch(Object(x.Ib)(l,o,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var s=t.items||[];e.setState({loading:!1,calling:!1,items:[].concat(Object(v.a)(i),Object(v.a)(s))})})))}}},{key:"renderTitle",value:function(e){return e.proposal.title}},{key:"renderDirection",value:function(e){return"for"==e.type?Object(c.jsx)("label",{className:"font-size-14 color-success",children:"For"}):Object(c.jsx)("label",{className:"font-size-14 color-danger",children:"Against"})}},{key:"renderStake",value:function(e){return e.value>0?Object(c.jsx)("label",{className:"font-size-14 color-success",children:e.value}):Object(c.jsx)("label",{className:"font-size-14 color-danger",children:e.value})}},{key:"renderResult",value:function(e){var t=e.vote;return"completed"==t.status?"success"==t.result?Object(c.jsx)("label",{className:"font-size-14 color-success",children:"Passed"}):"no-quorum"==t.result?Object(c.jsx)("label",{className:"font-size-14 color-danger",children:"No Quorum"}):Object(c.jsx)("label",{className:"font-size-14 color-danger",children:"Failed"}):null}},{key:"renderItems",value:function(){var e=this,t=this.state.items,s=[];return t&&t.length?(t.forEach((function(t){s.push(Object(c.jsx)("li",{children:Object(c.jsxs)("div",{className:"infinite-row",children:[Object(c.jsx)("div",{className:"c-col-1 c-cols",children:Object(c.jsx)("label",{className:"font-size-14 font-weight-700",children:e.renderTitle(t)})}),Object(c.jsx)("div",{className:"c-col-2 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"formal"==t.vote.type?"Formal":"Informal"})}),Object(c.jsx)("div",{className:"c-col-3 c-cols",children:e.renderDirection(t)}),Object(c.jsx)("div",{className:"c-col-4 c-cols",children:e.renderStake(t)}),Object(c.jsx)("div",{className:"c-col-5 c-cols",children:e.renderResult(t)}),Object(c.jsx)("div",{className:"c-col-6 c-cols",children:Object(c.jsxs)("label",{className:"font-size-14",children:[S(t.created_at).local().format("M/D/YYYY")," ",S(t.created_at).local().format("h:mm A")]})})]})},"proposal_".concat(t.id)))})),Object(c.jsx)("ul",{children:s})):Object(c.jsx)("div",{id:"infinite-no-result",children:Object(c.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderHeader",value:function(){return Object(c.jsx)("div",{className:"infinite-header",children:Object(c.jsxs)("div",{className:"infinite-headerInner",children:[Object(c.jsx)("div",{className:"c-col-1 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Proposal Title"})}),Object(c.jsx)("div",{className:"c-col-2 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Type"})}),Object(c.jsx)("div",{className:"c-col-3 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Direction"})}),Object(c.jsx)("div",{className:"c-col-4 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Stake"})}),Object(c.jsx)("div",{className:"c-col-5 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Result"})}),Object(c.jsx)("div",{className:"c-col-6 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Date"})})]})})}},{key:"render",value:function(){var e=this.state.loading,t=this.props.authUser;return t&&t.id?Object(c.jsx)(g.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:Object(c.jsx)("section",{id:"app-user-votes-section",className:"app-infinite-box",children:Object(c.jsx)("div",{className:"infinite-content",children:Object(c.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(c.jsx)("div",{className:"infinite-body",children:e?Object(c.jsx)(m.e,{}):this.renderItems()})]})})})}):null}}]),s}(p.Component),C=Object(h.b)((function(e){return{authUser:e.global.authUser}}))(z);s("u67W");function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,c=Object(j.a)(e);if(t){var n=Object(j.a)(this).constructor;s=Reflect.construct(c,arguments,n)}else s=c.apply(this,arguments);return Object(u.a)(this,s)}}var Y=s("wd/R"),U=function(e){Object(d.a)(s,e);var t=D(s);function s(e){var c;return Object(i.a)(this,s),(c=t.call(this,e)).state={loading:!1,items:[],sort_key:"reputation.updated_at",sort_direction:"desc",calling:!1,finished:!1},c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getReputation()}},{key:"reloadTable",value:function(){var e=this;this.setState({items:[],finished:!1},(function(){e.getReputation()}))}},{key:"getReputation",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=this.state,c=s.calling,n=s.loading,r=s.finished,a=s.sort_key,i=s.sort_direction,l=s.items,o=this.props.userId;if(!(n||c||r)){var d={sort_key:a,sort_direction:i};this.props.dispatch(Object(x.Ab)(o,d,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var s=t.items||[],c=t.finished||!1;e.setState({loading:!1,calling:!1,finished:c,items:[].concat(Object(v.a)(l),Object(v.a)(s))})})))}}},{key:"renderTitle",value:function(e){return e.proposal_id?e.proposal_title:"-"}},{key:"renderValue",value:function(e){var t=parseFloat(e.value);return t>0?Object(c.jsxs)("label",{className:"font-size-14 color-success",children:["+",t]}):t<0?Object(c.jsx)("label",{className:"font-size-14 color-danger",children:t}):""}},{key:"renderStaked",value:function(e){var t=parseFloat(e.staked);return t>0?Object(c.jsxs)("label",{className:"font-size-14 color-success",children:["+",t]}):t<0?Object(c.jsx)("label",{className:"font-size-14 color-danger",children:t}):""}},{key:"renderPending",value:function(e){var t=parseFloat(e.pending);return t>0?Object(c.jsxs)("label",{className:"font-size-14 color-success",children:["+",t]}):t<0?Object(c.jsx)("label",{className:"font-size-14 color-danger",children:t}):""}},{key:"renderItems",value:function(){var e=this,t=this.state.items,s=[];return t&&t.length?(t.forEach((function(t){s.push(Object(c.jsx)("li",{children:Object(c.jsxs)("div",{className:"infinite-row",children:[Object(c.jsx)("div",{className:"c-col-1 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:t.event})}),Object(c.jsx)("div",{className:"c-col-2 c-cols",children:Object(c.jsx)("label",{className:"font-size-14 font-weight-700",children:e.renderTitle(t)})}),Object(c.jsx)("div",{className:"c-col-3 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:t.type})}),Object(c.jsx)("div",{className:"c-col-4 c-cols",children:e.renderValue(t)}),Object(c.jsx)("div",{className:"c-col-5 c-cols",children:e.renderStaked(t)}),Object(c.jsx)("div",{className:"c-col-6 c-cols",children:e.renderPending(t)}),Object(c.jsx)("div",{className:"c-col-7 c-cols",children:Object(c.jsxs)("label",{className:"font-size-14",children:[Y(t.updated_at).local().format("M/D/YYYY")," ",Y(t.updated_at).local().format("h:mm A")]})})]})},"reputation_".concat(t.id)))})),Object(c.jsx)("ul",{children:s})):Object(c.jsx)("div",{id:"infinite-no-result",children:Object(c.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,s=t.sort_key,n=t.sort_direction;return s!=e?Object(c.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==n?Object(c.jsx)("span",{children:"\u25b2"}):Object(c.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,s=this.state,c=s.sort_key,n=s.sort_direction;c==e?n="asc"==n?"desc":"asc":(c=e,n="desc"),this.setState({sort_key:c,sort_direction:n},(function(){t.reloadTable()}))}},{key:"renderHeader",value:function(){var e=this;return Object(c.jsx)("div",{className:"infinite-header",children:Object(c.jsxs)("div",{className:"infinite-headerInner",children:[Object(c.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("reputation.event")},children:[Object(c.jsx)("label",{className:"font-size-14",children:"Event"}),this.renderTriangle("reputation.event")]}),Object(c.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(c.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(c.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("reputation.type")},children:[Object(c.jsx)("label",{className:"font-size-14",children:"Transaction Type"}),this.renderTriangle("reputation.type")]}),Object(c.jsx)("div",{className:"c-col-4 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Earned/Returned/Lost"})}),Object(c.jsx)("div",{className:"c-col-5 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Staked"})}),Object(c.jsx)("div",{className:"c-col-6 c-cols",children:Object(c.jsx)("label",{className:"font-size-14",children:"Pending"})}),Object(c.jsxs)("div",{className:"c-col-7 c-cols",onClick:function(){return e.clickHeader("reputation.updated_at")},children:[Object(c.jsx)("label",{className:"font-size-14",children:"Date"}),this.renderTriangle("reputation.updated_at")]})]})})}},{key:"render",value:function(){var e=this.state.loading,t=this.props.authUser;return t&&t.id?Object(c.jsx)(g.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:Object(c.jsx)("section",{id:"app-user-reputation-section",className:"app-infinite-box",children:Object(c.jsx)("div",{className:"infinite-content",children:Object(c.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(c.jsx)("div",{className:"infinite-body",children:e?Object(c.jsx)(m.e,{}):this.renderItems()})]})})})}):null}}]),s}(p.Component),I=Object(h.b)((function(e){return{authUser:e.global.authUser}}))(Object(f.g)(U));s("MzTq");function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,c=Object(j.a)(e);if(t){var n=Object(j.a)(this).constructor;s=Reflect.construct(c,arguments,n)}else s=c.apply(this,arguments);return Object(u.a)(this,s)}}var P=s("wd/R"),T=function(e){Object(d.a)(s,e);var t=F(s);function s(e){var c;return Object(i.a)(this,s),c=t.call(this,e),Object(b.a)(Object(o.a)(c),"clickResetPassword",(function(e){e.preventDefault();var t=c.state.user;c.props.dispatch(Object(O.Y)({"reset-password":{render:!0,title:"You are resetting password of this user",data:t}})),c.props.dispatch(Object(O.R)("custom-global-modal"))})),Object(b.a)(Object(o.a)(c),"clickAddRep",function(){var e=Object(a.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=c.state.user,e.next=4,c.props.dispatch(Object(O.Y)({"add-reputation":{render:!0,title:"You are adding to this users reputation score",data:s}}));case 4:return e.next=6,c.props.dispatch(Object(O.R)("custom-global-modal"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(b.a)(Object(o.a)(c),"clickSubRep",function(){var e=Object(a.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=c.state.user,e.next=4,c.props.dispatch(Object(O.Y)({"sub-reputation":{render:!0,title:"You are subtracting from this users reputation score",data:s}}));case 4:return e.next=6,c.props.dispatch(Object(O.R)("custom-global-modal"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(b.a)(Object(o.a)(c),"clickChangeUserType",function(){var e=Object(a.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=c.state.user,e.next=4,c.props.dispatch(Object(O.Y)({"change-user-type":{render:!0,title:"You are changing this users type",data:s}}));case 4:return e.next=6,c.props.dispatch(Object(O.R)("custom-global-modal"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(b.a)(Object(o.a)(c),"clickChangeUserAML",function(){var e=Object(a.a)(r.a.mark((function e(t,s,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=c.state.user,e.next=4,c.props.dispatch(Object(O.Y)({"change-user-aml":{render:!0,title:"Please enter the updated information",data:a,field:s,value:n}}));case 4:return e.next=6,c.props.dispatch(Object(O.R)("custom-global-modal"));case 6:case"end":return e.stop()}}),e)})));return function(t,s,c){return e.apply(this,arguments)}}()),Object(b.a)(Object(o.a)(c),"banUser",(function(e){e.preventDefault();var t=c.state.user;confirm("Are you sure you are going to ban this user?")&&c.props.dispatch(Object(x.l)(t.id,(function(){c.props.dispatch(Object(O.ub)())}),(function(e){c.props.dispatch(Object(O.N)()),e&&e.success&&(c.props.dispatch(Object(O.tb)("You've successfully banned this user","success")),c.getUser())})))})),Object(b.a)(Object(o.a)(c),"unbanUser",(function(e){e.preventDefault();var t=c.state.user;confirm("Are you sure you are going to unban this user?")&&c.props.dispatch(Object(x.pc)(t.id,(function(){c.props.dispatch(Object(O.ub)())}),(function(e){c.props.dispatch(Object(O.N)()),e&&e.success&&(c.props.dispatch(Object(O.tb)("You've successfully unbanned this user","success")),c.getUser())})))})),Object(b.a)(Object(o.a)(c),"clickApprove",(function(e){if(e.preventDefault(),confirm("Are you sure you are going to approve this KYC?")){var t=c.state.user;c.props.dispatch(Object(x.f)(t.id,(function(){c.props.dispatch(Object(O.ub)())}),(function(e){c.props.dispatch(Object(O.N)()),e&&e.success&&c.getUser()})))}})),Object(b.a)(Object(o.a)(c),"clickDeny",(function(e){if(e.preventDefault(),confirm("Are you sure you are going to deny this KYC?")){var t=c.state.user;c.props.dispatch(Object(x.y)(t.id,(function(){c.props.dispatch(Object(O.ub)())}),(function(e){c.props.dispatch(Object(O.N)()),e&&e.success&&c.getUser()})))}})),Object(b.a)(Object(o.a)(c),"clickReset",(function(e){var t=c.state.user;e.preventDefault(),c.props.dispatch(Object(O.gb)(t)),c.props.dispatch(Object(O.R)("reset-kyc"))})),c.state={userId:0,user:{},loading:!1},c}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;this.setState({userId:t},(function(){e.getUser()}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.refreshSingleUserPage;!e.refreshSingleUserPage&&t&&(this.getUser(),this.props.dispatch(Object(O.ob)(!1)))}},{key:"getUser",value:function(){var e=this,t=this.state,s=t.userId;t.loading||this.props.dispatch(Object(x.Fb)(s,(function(){e.setState({loading:!0}),e.props.dispatch(Object(O.ub)())}),(function(t){var s=t.user||{};e.setState({user:s,loading:!1}),e.props.dispatch(Object(O.N)())})))}},{key:"renderButtons",value:function(){var e=this.state.user,t=[],s=[],n=[];if(e.banned?t.push(Object(c.jsx)("a",{className:"btn btn-danger-outline btn-fluid extra-small",onClick:this.unbanUser,children:"Unban User"},"button_unban")):t.push(Object(c.jsx)("a",{className:"btn btn-danger btn-fluid extra-small",onClick:this.banUser,children:"Ban User"},"button_ban")),t.push(Object(c.jsx)("a",{className:"btn btn-success btn-fluid extra-small",onClick:this.clickResetPassword,children:"Reset Password"},"button_reset")),t.push(Object(c.jsx)("a",{className:"btn btn-success-outline btn-fluid extra-small",onClick:this.clickChangeUserType,children:"Change User Type"},"button_change_ut")),s.push(Object(c.jsx)("a",{className:"btn btn-primary btn-fluid extra-small",onClick:this.clickAddRep,children:"Add Reputation"},"button_add_r")),s.push(Object(c.jsx)("a",{className:"btn btn-primary-outline btn-fluid extra-small",onClick:this.clickSubRep,children:"Subtract Reputation"},"button_subtract_r")),e&&e.shuftipro&&e.shuftipro.id){var r=e.shuftipro;r.reviewed||"approved"==r.status||(n.push(Object(c.jsx)("a",{className:"btn btn-warning btn-fluid extra-small",onClick:this.clickApprove,children:"Approve KYC"},"button_approve_kyc")),n.push(Object(c.jsx)("a",{className:"btn btn-danger-outline btn-fluid extra-small",onClick:this.clickDeny,children:"Deny KYC"},"button_deny_kyc")),n.push(Object(c.jsx)("a",{className:"btn btn-info btn-fluid extra-small",onClick:this.clickReset,children:"Reset KYC"},"button_reset_kyc")))}return Object(c.jsxs)(p.Fragment,{children:[Object(c.jsx)("div",{className:"app-sup-section-button-row",children:t}),Object(c.jsx)("div",{className:"app-sup-section-button-row mt-2",children:s}),Object(c.jsx)("div",{className:"app-sup-section-button-row mt-2",children:n})]})}},{key:"renderShuftiproStatus",value:function(){var e=this.state.user;return e.shuftipro&&e.shuftipro.id?"approved"==e.shuftipro.status?"Approved":"Denied":e.shuftipro_temp&&"pending"!=e.shuftipro_temp.status?"Submitted":"Not Submitted"}},{key:"renderKYCInfo",value:function(){var e=this,t=this.props.authUser,s=this.state.user,n=null,r=null;return s.shuftipro&&s.shuftipro.manual_approved_at&&(n=P(s.shuftipro.manual_approved_at+".000Z").format("M/D/YYYY")),s.shuftipro&&s.shuftipro.manual_reviewer&&(r=s.shuftipro.manual_reviewer),Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"app-sup-section",children:[Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Date of Birth"}),Object(c.jsx)("span",{children:s.profile.dob})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Country of Citizenship"}),Object(c.jsx)("span",{children:s.profile.country_citizenship})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Country of Residence"}),Object(c.jsx)("span",{children:s.profile.country_residence})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Address"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:s.profile.address}),t.is_admin&&Object(c.jsx)("button",{className:"ml-4 btn btn-primary extra-small",onClick:function(t){return e.clickChangeUserAML(t,"address",s.profile.address)},children:"Edit"})]})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"City"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:s.profile.city}),t.is_admin&&Object(c.jsx)("button",{className:"ml-4 btn btn-primary extra-small",onClick:function(t){return e.clickChangeUserAML(t,"city",s.profile.city)},children:"Edit"})]})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Postal / Zip Code"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:s.profile.zip}),t.is_admin&&Object(c.jsx)("button",{className:"ml-4 btn btn-primary extra-small",onClick:function(t){return e.clickChangeUserAML(t,"zip",s.profile.zip)},children:"Edit"})]})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Overall Status"}),Object(c.jsx)("span",{children:this.renderShuftiproStatus()})]}),s.shuftipro&&Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Shufti Ref #"}),Object(c.jsx)("span",{children:s.shuftipro.reference_id})]}),n?Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Manually Approved At"}),Object(c.jsx)("span",{children:n})]}):null,r?Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Manually Approved By"}),Object(c.jsx)("span",{children:r})]}):null]})})}},{key:"renderHellosignForm",value:function(){var e=this.state.user.profile;return e.hellosign_form?Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://backend.devxdao.com/"+e.hellosign_form,className:"text-underline",children:"Click Here"}):null}},{key:"render",value:function(){var e,t,s=this.props.authUser;if(!s||!s.id)return null;if(!s.is_admin)return Object(c.jsx)(f.a,{to:"/"});var n=this.state,r=n.loading,a=n.user;return r?null:a&&a.id?Object(c.jsxs)("div",{id:"app-single-user-page",children:[Object(c.jsx)(m.g,{title:"Back"}),Object(c.jsxs)("div",{className:"app-simple-section",children:[Object(c.jsx)("label",{className:"app-sup-header",children:"Basic Info"}),Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"app-sup-section",children:[Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"User ID"}),Object(c.jsx)("span",{children:a.id})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"User Type"}),Object(c.jsx)("span",{children:a.is_member?"Voting Associate":a.is_participant?"Associate":"Guest"})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Registration Date"}),Object(c.jsx)("span",{children:P(a.created_at).format("M/D/YYYY")})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("span",{children:a.email})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Telegram"}),Object(c.jsx)("span",{children:null===(e=a.profile)||void 0===e?void 0:e.telegram})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"First Name"}),Object(c.jsx)("span",{children:a.first_name})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Last Name"}),Object(c.jsx)("span",{children:a.last_name})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Forum Name"}),Object(c.jsx)("span",{children:a.profile.forum_name})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Company Name"}),Object(c.jsx)("span",{children:a.company})]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Associate Agreement"}),this.renderHellosignForm()]}),Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Associate Agreement Timestamp"}),Object(c.jsx)("span",{children:P((null===a||void 0===a||null===(t=a.profile)||void 0===t?void 0:t.associate_agreement_at)+".000Z").format("MM/DD/YYYY hh:mm")})]}),a.member_no?Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Voting Associate #"}),Object(c.jsx)("span",{children:a.member_no})]}):null,a.member_at?Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Voting Promotion Date"}),Object(c.jsx)("span",{children:P(a.member_at+".000Z").format("M/D/YYYY")})]}):null]})}),Object(c.jsx)("label",{className:"app-sup-header",children:"KYC / AML Info"}),this.renderKYCInfo(),Object(c.jsx)("label",{className:"app-sup-header",children:"Proposals ( as OP )"}),Object(c.jsx)("section",{children:Object(c.jsx)("div",{className:"app-sup-section",children:Object(c.jsx)(w,{userId:a.id})})}),Object(c.jsx)("label",{className:"app-sup-header",children:"Votes"}),Object(c.jsx)("section",{children:Object(c.jsx)("div",{className:"app-sup-section",children:Object(c.jsx)(C,{userId:a.id})})}),Object(c.jsx)("label",{className:"app-sup-header",children:"Reputation"}),Object(c.jsx)("section",{children:Object(c.jsxs)("div",{className:"app-sup-section",children:[Object(c.jsxs)("div",{className:"app-sup-row",children:[Object(c.jsx)("label",{children:"Current Total"}),Object(c.jsx)("span",{children:a.profile.rep})]}),Object(c.jsx)(I,{userId:a.id})]})}),Object(c.jsx)("label",{className:"app-sup-header",children:"Admin Functions"}),Object(c.jsx)("section",{children:Object(c.jsx)("div",{className:"app-sup-section",children:this.renderButtons()})})]})]}):Object(c.jsx)("div",{children:"We can't find any details"})}}]),s}(p.Component);t.default=Object(h.b)((function(e){return{authUser:e.global.authUser,refreshSingleUserPage:e.admin.refreshSingleUserPage}}))(Object(f.g)(T))}}]);
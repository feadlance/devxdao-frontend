(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[54],{PePI:function(e,t,c){"use strict";c.r(t);var i=c("nKUr"),n=c("1OyB"),a=c("vuIU"),s=c("Ji7U"),r=c("md7G"),l=c("foSv"),o=c("q1tI"),d=c("/MKj"),u=c("Ty5D"),h=c("s/m+"),j=(c("4t4X"),c("JX7q")),b=c("rePB"),f=c("KQm4"),v=c("wd/R"),p=c.n(v),m=c("55Ip"),O=c("e+cM"),y=c("ZpDd"),x=c("LADp");c("drvi");function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,i=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;c=Reflect.construct(i,arguments,n)}else c=i.apply(this,arguments);return Object(r.a)(this,c)}}var N=function(e){Object(s.a)(c,e);var t=g(c);function c(e){var i;return Object(n.a)(this,c),i=t.call(this,e),Object(b.a)(Object(j.a)(i),"trackScroll",(function(){i.$elem&&i.$elem.scrollTop+i.$elem.clientHeight>=i.$elem.scrollHeight&&i.runNextPage()})),Object(b.a)(Object(j.a)(i),"doCancel",(function(e){i.props.dispatch(Object(y.X)("cancel-active-survey",{id:e}))})),i.state={loading:!1,data:[],sort_key:"",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},i.$elem=null,i.timer=null,i}return Object(a.a)(c,[{key:"componentDidMount",value:function(){var e=this.props.authUser;e&&e.id&&this.startTracking(),this.getData()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.authUser;e.authUser&&e.authUser.id||!t||!t.id||this.startTracking(),this.props.reloadActiveSurveyTable&&this.props.reloadActiveSurveyTable!==e.reloadActiveSurveyTable&&(this.props.dispatch(Object(y.P)(!1)),this.reloadTable())}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,data:[],finished:!1},(function(){e.getData()}))}},{key:"startTracking",value:function(){this.$elem=document.getElementById("milestone-in-review-scroll-track"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,i=t.loading,n=t.finished,a=t.page_id;c||i||n||this.setState({page_id:a+1},(function(){e.getData(!1)}))}},{key:"getData",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,i=c.calling,n=c.loading,a=c.finished,s=c.sort_key,r=c.sort_direction,l=c.search,o=c.page_id,d=c.data;if(!(n||i||a)){var u={sort_key:s,sort_direction:r,search:l,page_id:o,limit:1,status:"active"};this.props.dispatch(Object(x.Yb)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.surveys||[],i=t.finished||!1;e.setState({loading:!1,calling:!1,finished:i,data:[].concat(Object(f.a)(d),Object(f.a)(c))})})))}}},{key:"renderResult",value:function(){var e=this,t=this.state.data,c=[];return t&&t.length?(t.forEach((function(t){c.push(Object(i.jsx)("li",{children:Object(i.jsxs)("div",{className:"infinite-row align-items-center d-flex py-3 font-size-14 font-weight-700",children:[Object(i.jsx)("div",{className:"c-col-1 c-cols",children:Object(i.jsx)(m.b,{to:"/app/surveys/".concat(t.id),children:Object(i.jsxs)("p",{children:["S",t.id]})})}),Object(i.jsx)("div",{className:"c-col-2 c-cols",children:Object(i.jsx)("p",{children:p()(t.created_at).local().format("M/D/YYYY HH:mm A")})}),Object(i.jsx)("div",{className:"c-col-3 c-cols",children:Object(i.jsx)("p",{children:p()(t.end_time).local().format("M/D/YYYY HH:mm A")})}),Object(i.jsx)("div",{className:"c-col-4 c-cols",children:Object(i.jsx)("p",{children:t.user_responded})}),Object(i.jsx)("div",{className:"c-col-5 c-cols",children:Object(i.jsx)("p",{children:t.total_member})}),Object(i.jsx)("div",{className:"c-col-9 c-cols",children:Object(i.jsx)("button",{className:"btn btn-primary-outline extra-small btn-fluid-small",onClick:function(){return e.doCancel(t.id)},children:"Cancel Survey"})})]})},"mile_".concat(t.id)))})),Object(i.jsx)("ul",{children:c})):Object(i.jsx)("div",{id:"infinite-no-result",children:Object(i.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"render",value:function(){var e=this.state.loading;return Object(i.jsx)("div",{className:"active-surveys-table infinite-content",children:Object(i.jsxs)("div",{className:"infinite-contentInner",children:[Object(i.jsx)("div",{className:"infinite-header",children:Object(i.jsxs)("div",{className:"infinite-headerInner",children:[Object(i.jsx)("div",{className:"c-col-1 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Survey Number"})}),Object(i.jsx)("div",{className:"c-col-2 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Start date"})}),Object(i.jsx)("div",{className:"c-col-3 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"End date"})}),Object(i.jsx)("div",{className:"c-col-4 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"User Responded"})}),Object(i.jsx)("div",{className:"c-col-5 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Users eligible"})}),Object(i.jsx)("div",{className:"c-col-6 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Action"})})]})}),Object(i.jsx)("div",{className:"infinite-body",id:"milestone-in-review-scroll-track",children:e?Object(i.jsx)(O.f,{}):this.renderResult()})]})})}}]),c}(o.Component),S=Object(d.b)((function(e){return{authUser:e.global.authUser,reloadActiveSurveyTable:e.admin.reloadActiveSurveyTable}}))(N),k=c("XqUm");c("v0Wc");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,i=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;c=Reflect.construct(i,arguments,n)}else c=i.apply(this,arguments);return Object(r.a)(this,c)}}var R=function(e){Object(s.a)(c,e);var t=_(c);function c(e){var i;return Object(n.a)(this,c),i=t.call(this,e),Object(b.a)(Object(j.a)(i),"startNewSurvey",(function(){var e=i.state.isActiveSurveyExisted;(e&&i.props.dispatch(Object(y.zb)("You cannot begin a new survey while a survey is active.","warning")),!1===e)&&i.props.history.push("/app/surveys/start")})),i.state={isActiveSurveyExisted:null},i}return Object(a.a)(c,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e){this.props.reloadGuardStartSurvey&&this.props.reloadGuardStartSurvey!==e.reloadGuardStartSurvey&&(this.props.dispatch(Object(y.R)(!1)),this.getData())}},{key:"getData",value:function(){var e=this;this.props.dispatch(Object(x.Yb)({limit:1,status:"active"},(function(){}),(function(t){var c=t.surveys||[];e.setState({isActiveSurveyExisted:c.length>0})})))}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"h-100 milestones-page",children:Object(i.jsxs)(h.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:[Object(i.jsxs)("section",{className:"app-infinite-box mb-4",children:[Object(i.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(i.jsx)("label",{children:"Active Surveys"}),Object(i.jsx)("button",{onClick:this.startNewSurvey,className:"btn btn-primary less-small",children:"Start New Survey"})]}),Object(i.jsx)(S,{})]}),Object(i.jsx)("section",{className:"app-infinite-box mb-4",children:Object(i.jsx)(k.a,{})})]})})}}]),c}(o.Component),D=Object(d.b)((function(e){return{authUser:e.global.authUser,reloadGuardStartSurvey:e.admin.reloadGuardStartSurvey}}))(Object(u.g)(R));c("3wzc"),c("fLBi");function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,i=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;c=Reflect.construct(i,arguments,n)}else c=i.apply(this,arguments);return Object(r.a)(this,c)}}var T=function(e){Object(s.a)(c,e);var t=U(c);function c(e){var i;return Object(n.a)(this,c),i=t.call(this,e),Object(b.a)(Object(j.a)(i),"trackScroll",(function(){i.$elem&&i.$elem.scrollTop+i.$elem.clientHeight>=i.$elem.scrollHeight&&i.runNextPage()})),Object(b.a)(Object(j.a)(i),"doCancel",(function(e){i.props.dispatch(Object(y.X)("cancel-active-survey",{id:e}))})),i.state={loading:!1,data:[],sort_key:"",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},i.$elem=null,i.timer=null,i}return Object(a.a)(c,[{key:"componentDidMount",value:function(){var e=this.props.authUser;e&&e.id&&this.startTracking(),this.getData()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.authUser;e.authUser&&e.authUser.id||!t||!t.id||this.startTracking(),this.props.reloadActiveSurveyTable&&this.props.reloadActiveSurveyTable!==e.reloadActiveSurveyTable&&(this.props.dispatch(Object(y.P)(!1)),this.reloadTable())}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,data:[],finished:!1},(function(){e.getData()}))}},{key:"startTracking",value:function(){this.$elem=document.getElementById("completed-surveys-scroll-track"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,i=t.loading,n=t.finished,a=t.page_id;c||i||n||this.setState({page_id:a+1},(function(){e.getData(!1)}))}},{key:"getData",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,i=c.calling,n=c.loading,a=c.finished,s=c.sort_key,r=c.sort_direction,l=c.search,o=c.page_id,d=c.data;if(!(n||i||a)){var u={sort_key:s,sort_direction:r,search:l,page_id:o,status:"completed"};this.props.dispatch(Object(x.Yb)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.surveys||[],i=t.finished||!1;e.setState({loading:!1,calling:!1,finished:i,data:[].concat(Object(f.a)(d),Object(f.a)(c))})})))}}},{key:"renderResult",value:function(){var e=this.state.data,t=[];return e&&e.length?(e.forEach((function(e){t.push(Object(i.jsx)("li",{children:Object(i.jsxs)("div",{className:"infinite-row align-items-center d-flex py-3 font-size-14 font-weight-700",children:[Object(i.jsx)("div",{className:"c-col-1 c-cols",children:Object(i.jsx)(m.b,{to:"/app/surveys/".concat(e.id),children:Object(i.jsxs)("p",{children:["S",e.id]})})}),Object(i.jsx)("div",{className:"c-col-2 c-cols",children:Object(i.jsx)("p",{children:p()(e.created_at).local().format("M/D/YYYY HH:mm A")})}),Object(i.jsx)("div",{className:"c-col-3 c-cols",children:Object(i.jsx)("p",{children:p()(e.end_time).local().format("M/D/YYYY HH:mm A")})}),Object(i.jsx)("div",{className:"c-col-4 c-cols",children:Object(i.jsx)("p",{children:e.user_responded})})]})},"mile_".concat(e.id)))})),Object(i.jsx)("ul",{children:t})):Object(i.jsx)("div",{id:"infinite-no-result",children:Object(i.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"render",value:function(){var e=this.state.loading;return Object(i.jsx)("div",{className:"completed-surveys-table infinite-content",children:Object(i.jsxs)("div",{className:"infinite-contentInner",children:[Object(i.jsx)("div",{className:"infinite-header",children:Object(i.jsxs)("div",{className:"infinite-headerInner",children:[Object(i.jsx)("div",{className:"c-col-1 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Survey Number"})}),Object(i.jsx)("div",{className:"c-col-2 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"Start date"})}),Object(i.jsx)("div",{className:"c-col-3 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"End date"})}),Object(i.jsx)("div",{className:"c-col-4 c-cols",children:Object(i.jsx)("label",{className:"font-size-14",children:"User Responded"})})]})}),Object(i.jsx)("div",{className:"infinite-body",id:"completed-surveys-scroll-track",children:e?Object(i.jsx)(O.f,{}):this.renderResult()})]})})}}]),c}(o.Component),w=Object(d.b)((function(e){return{authUser:e.global.authUser,reloadActiveSurveyTable:e.admin.reloadActiveSurveyTable}}))(T);function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,i=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;c=Reflect.construct(i,arguments,n)}else c=i.apply(this,arguments);return Object(r.a)(this,c)}}var Y=function(e){Object(s.a)(c,e);var t=A(c);function c(e){return Object(n.a)(this,c),t.call(this,e)}return Object(a.a)(c,[{key:"render",value:function(){return Object(i.jsx)("div",{className:"h-100 milestones-page",children:Object(i.jsx)(h.Fade,{distance:"20px",bottom:!0,duration:300,delay:600,children:Object(i.jsxs)("section",{className:"app-infinite-box mb-4",children:[Object(i.jsx)("div",{className:"app-infinite-search-wrap",children:Object(i.jsx)("label",{children:"Completed Surveys"})}),Object(i.jsx)(w,{})]})})})}}]),c}(o.Component),$=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(u.g)(Y));function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,i=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;c=Reflect.construct(i,arguments,n)}else c=i.apply(this,arguments);return Object(r.a)(this,c)}}var C=function(e){Object(s.a)(c,e);var t=z(c);function c(e){var i;return Object(n.a)(this,c),(i=t.call(this,e)).state={tab:"active"},i}return Object(a.a)(c,[{key:"render",value:function(){var e=this,t=this.state.tab,c=this.props.authUser;return c&&c.id?Object(i.jsxs)("div",{id:"app-discussions-page",children:[Object(i.jsx)(h.Fade,{distance:"20px",bottom:!0,duration:400,delay:600,children:Object(i.jsxs)("ul",{id:"app-discussions-pageHeader",children:[Object(i.jsx)("li",{className:"active"==t?"active":"",onClick:function(){return e.setState({tab:"active"})},children:"Active"}),Object(i.jsx)("li",{className:"completed"==t?"active":"",onClick:function(){return e.setState({tab:"completed"})},children:"Completed"})]})}),"active"===t&&Object(i.jsx)(D,{}),"completed"===t&&Object(i.jsx)($,{})]}):null}}]),c}(o.Component);t.default=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(u.g)(C))}}]);
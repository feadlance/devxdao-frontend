(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[57],{XxLS:function(e,t,c){"use strict";c.r(t);var s=c("nKUr"),l=c("1OyB"),i=c("vuIU"),n=c("Ji7U"),a=c("md7G"),r=c("foSv"),o=c("q1tI"),d=c.n(o),u=c("/MKj"),m=c("Ty5D"),j=c("s/m+"),b=c("KQm4"),h=c("JX7q"),p=c("rePB"),f=c("17x9"),v=c.n(f);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var c,s,l=function(e,t){if(null==e)return{};var c,s,l={},i=Object.keys(e);for(s=0;s<i.length;s++)c=i[s],t.indexOf(c)>=0||(l[c]=e[c]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)c=i[s],t.indexOf(c)>=0||Object.prototype.propertyIsEnumerable.call(e,c)&&(l[c]=e[c])}return l}var g=Object(o.forwardRef)((function(e,t){var c=e.color,s=void 0===c?"currentColor":c,l=e.size,i=void 0===l?24:l,n=x(e,["color","size"]);return d.a.createElement("svg",O({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},n),d.a.createElement("polyline",{points:"20 6 9 17 4 12"}))}));g.propTypes={color:v.a.string,size:v.a.oneOfType([v.a.string,v.a.number])},g.displayName="Check";var N=g,k=c("wHH0"),_=c("Cup8"),y=c("I6fM"),T=c("wx14"),z=c("ODXe"),S=c("Ff2n"),w=c("i8i4"),R=c("iuhU"),C=c("2+6g"),H=c("ye/S"),I=c("H2TA"),M=c("NqtD"),D=c("bqsI"),V=c("AOnC"),F=c("bfFb"),L=c("wRgb"),U=c("GIek"),B=c("G7As"),E=c("yCxk"),P=c("tr08");function $(e){return Math.round(1e5*e)/1e5}var A=!1,Y=null;var Q=o.forwardRef((function(e,t){var c=e.arrow,s=void 0!==c&&c,l=e.children,i=e.classes,n=e.disableFocusListener,a=void 0!==n&&n,r=e.disableHoverListener,d=void 0!==r&&r,u=e.disableTouchListener,m=void 0!==u&&u,j=e.enterDelay,b=void 0===j?100:j,h=e.enterNextDelay,p=void 0===h?0:h,f=e.enterTouchDelay,v=void 0===f?700:f,O=e.id,x=e.interactive,g=void 0!==x&&x,N=e.leaveDelay,k=void 0===N?0:N,_=e.leaveTouchDelay,y=void 0===_?1500:_,H=e.onClose,I=e.onOpen,$=e.open,Q=e.placement,q=void 0===Q?"bottom":Q,W=e.PopperComponent,G=void 0===W?V.a:W,X=e.PopperProps,J=e.title,K=e.TransitionComponent,Z=void 0===K?D.a:K,ee=e.TransitionProps,te=Object(S.a)(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),ce=Object(P.a)(),se=o.useState(),le=se[0],ie=se[1],ne=o.useState(null),ae=ne[0],re=ne[1],oe=o.useRef(!1),de=o.useRef(),ue=o.useRef(),me=o.useRef(),je=o.useRef(),be=Object(E.a)({controlled:$,default:!1,name:"Tooltip",state:"open"}),he=Object(z.a)(be,2),pe=he[0],fe=he[1],ve=pe,Oe=Object(L.a)(O);o.useEffect((function(){return function(){clearTimeout(de.current),clearTimeout(ue.current),clearTimeout(me.current),clearTimeout(je.current)}}),[]);var xe=function(e){clearTimeout(Y),A=!0,fe(!0),I&&I(e)},ge=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var c=l.props;"mouseover"===t.type&&c.onMouseOver&&e&&c.onMouseOver(t),oe.current&&"touchstart"!==t.type||(le&&le.removeAttribute("title"),clearTimeout(ue.current),clearTimeout(me.current),b||A&&p?(t.persist(),ue.current=setTimeout((function(){xe(t)}),A?p:b)):xe(t))}},Ne=Object(B.a)(),ke=Ne.isFocusVisible,_e=Ne.onBlurVisible,ye=Ne.ref,Te=o.useState(!1),ze=Te[0],Se=Te[1],we=function(){ze&&(Se(!1),_e())},Re=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){le||ie(t.currentTarget),ke(t)&&(Se(!0),ge()(t));var c=l.props;c.onFocus&&e&&c.onFocus(t)}},Ce=function(e){clearTimeout(Y),Y=setTimeout((function(){A=!1}),800+k),fe(!1),H&&H(e),clearTimeout(de.current),de.current=setTimeout((function(){oe.current=!1}),ce.transitions.duration.shortest)},He=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var c=l.props;"blur"===t.type&&(c.onBlur&&e&&c.onBlur(t),we()),"mouseleave"===t.type&&c.onMouseLeave&&t.currentTarget===le&&c.onMouseLeave(t),clearTimeout(ue.current),clearTimeout(me.current),t.persist(),me.current=setTimeout((function(){Ce(t)}),k)}},Ie=function(e){oe.current=!0;var t=l.props;t.onTouchStart&&t.onTouchStart(e)},Me=Object(F.a)(ie,t),De=Object(F.a)(ye,Me),Ve=o.useCallback((function(e){Object(U.a)(De,w.findDOMNode(e))}),[De]),Fe=Object(F.a)(l.ref,Ve);""===J&&(ve=!1);var Le=!ve&&!d,Ue=Object(T.a)({"aria-describedby":ve?Oe:null,title:Le&&"string"===typeof J?J:null},te,l.props,{className:Object(R.a)(te.className,l.props.className),onTouchStart:Ie,ref:Fe}),Be={};m||(Ue.onTouchStart=function(e){Ie(e),clearTimeout(me.current),clearTimeout(de.current),clearTimeout(je.current),e.persist(),je.current=setTimeout((function(){ge()(e)}),v)},Ue.onTouchEnd=function(e){l.props.onTouchEnd&&l.props.onTouchEnd(e),clearTimeout(je.current),clearTimeout(me.current),e.persist(),me.current=setTimeout((function(){Ce(e)}),y)}),d||(Ue.onMouseOver=ge(),Ue.onMouseLeave=He(),g&&(Be.onMouseOver=ge(!1),Be.onMouseLeave=He(!1))),a||(Ue.onFocus=Re(),Ue.onBlur=He(),g&&(Be.onFocus=Re(!1),Be.onBlur=He(!1)));var Ee=o.useMemo((function(){return Object(C.a)({popperOptions:{modifiers:{arrow:{enabled:Boolean(ae),element:ae}}}},X)}),[ae,X]);return o.createElement(o.Fragment,null,o.cloneElement(l,Ue),o.createElement(G,Object(T.a)({className:Object(R.a)(i.popper,g&&i.popperInteractive,s&&i.popperArrow),placement:q,anchorEl:le,open:!!le&&ve,id:Ue["aria-describedby"],transition:!0},Be,Ee),(function(e){var t=e.placement,c=e.TransitionProps;return o.createElement(Z,Object(T.a)({timeout:ce.transitions.duration.shorter},c,ee),o.createElement("div",{className:Object(R.a)(i.tooltip,i["tooltipPlacement".concat(Object(M.a)(t.split("-")[0]))],oe.current&&i.touch,s&&i.tooltipArrow)},J,s?o.createElement("span",{className:i.arrow,ref:re}):null))})))})),q=Object(I.a)((function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},tooltip:{backgroundColor:Object(H.c)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat($(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:Object(H.c)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat($(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:Object(p.a)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:Object(p.a)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:Object(p.a)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:Object(p.a)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}}),{name:"MuiTooltip",flip:!1})(Q),W=c("e+cM"),G=c("LADp"),X=c("ZpDd"),J=(c("O1Ha"),c("YW6W"));function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(r.a)(e);if(t){var l=Object(r.a)(this).constructor;c=Reflect.construct(s,arguments,l)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var Z=c("wd/R"),ee=function(e){Object(n.a)(c,e);var t=K(c);function c(e){var s;return Object(l.a)(this,c),s=t.call(this,e),Object(p.a)(Object(h.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(p.a)(Object(h.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,votes:[],sort_key:"timeLeft",sort_direction:"asc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(i.a)(c,[{key:"componentDidMount",value:function(){this.startTracking(),this.getVotes()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.informalBallotTableStatus;!e.informalBallotTableStatus&&t&&(this.reloadTable(),this.props.dispatch(Object(X.lb)(!1)))}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-active-informal-votes-sectionBody"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,votes:[],finished:!1},(function(){e.getVotes()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,l=t.finished,i=t.page_id;c||s||l||this.setState({page_id:i+1},(function(){e.getVotes(!1)}))}},{key:"getVotes",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,l=c.loading,i=c.finished,n=c.sort_key,a=c.sort_direction,r=c.search,o=c.page_id,d=c.votes;if(!(l||s||i)){var u={sort_key:n,sort_direction:a,search:r,page_id:o};this.props.dispatch(Object(G.ab)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.votes||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,votes:[].concat(Object(b.a)(d),Object(b.a)(c))})})))}}},{key:"clickRow",value:function(e){var t=this.props,c=t.authUser,s=t.history;c.is_guest?(this.props.dispatch(Object(X.eb)({"voting-access-alert":{render:!0,title:"Sorry, you can't access a live vote."}})),this.props.dispatch(Object(X.X)("custom-global-modal"))):s.push("/app/proposal/".concat(e.proposal_id))}},{key:"renderTriangle",value:function(e){var t=this.state,c=t.sort_key,l=t.sort_direction;return c!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==l?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,c=this.state,s=c.sort_key,l=c.sort_direction;s==e?l="asc"==l?"desc":"asc":(s=e,l="desc"),this.setState({sort_key:s,sort_direction:l},(function(){t.reloadTable()}))}},{key:"renderQuorum",value:function(e){var t=this.props,c=t.authUser,l=t.settings,i=0;if("simple"===e.content_type?i=+l.quorum_rate_simple:"grant"===e.content_type?i=+l.quorum_rate:"milestone"===e.content_type&&(i=+l.quorum_rate_milestone),i){var n=+e.result_count/+c.totalMembers>=+i/100;return Object(s.jsxs)("div",{className:"font-size-14",children:[Object(s.jsx)("label",{children:e.result_count})," /"," ",Object(s.jsx)("label",{className:"pr-2",children:c.totalMembers}),n?Object(s.jsx)(N,{size:"14"}):Object(s.jsx)(k.a,{size:"14"})]})}}},{key:"renderHeader",value:function(){var e=this,t=this.props.authUser,c=null;return c=t&&t.is_member?Object(s.jsxs)(o.Fragment,{children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Euros"})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"My Vote"})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Rep"})}),Object(s.jsxs)("div",{className:"c-col-6 c-cols",onClick:function(){return e.clickHeader("timeLeft")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Time Left"}),this.renderTriangle("timeLeft")]}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Quorum"})}),Object(s.jsxs)("div",{className:"c-col-8 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Submitted"}),this.renderTriangle("vote.created_at")]})]}):Object(s.jsxs)(o.Fragment,{children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Euros"})}),Object(s.jsxs)("div",{className:"c-col-4 c-cols",onClick:function(){return e.clickHeader("timeLeft")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Time Left"}),this.renderTriangle("timeLeft")]}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Quorum"})}),Object(s.jsxs)("div",{className:"c-col-6 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Submitted"}),this.renderTriangle("vote.created_at")]})]}),Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsx)("div",{className:"infinite-headerInner",children:c})})}},{key:"renderMyVote",value:function(e){return this.props.authUser.id==e.user_id?Object(s.jsx)("label",{className:"font-size-14 d-block",children:"-"}):e.vote_result_type?"for"==e.vote_result_type?Object(s.jsx)("a",{className:"btn btn-success extra-small",children:"For"}):Object(s.jsx)("a",{className:"btn btn-danger extra-small",children:"Against"}):Object(s.jsx)("a",{className:"btn btn-primary extra-small",children:"None"})}},{key:"renderRep",value:function(e){return this.props.authUser.id==e.user_id?Object(s.jsx)("label",{className:"font-size-14 d-block",children:"-"}):Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.vote_result_value||0})}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderTooltip",value:function(){return Object(s.jsx)(o.Fragment,{children:Object(s.jsx)("p",{className:"font-size-13",children:"This area displays informal votes currently in progress. If you are a Voting Associate, you should review and vote."})})}},{key:"renderVotes",value:function(){var e=this,t=this.state.votes,c=this.props,l=c.authUser,i=c.settings,n=[];return t&&t.length?(t.forEach((function(t,c){var a=0;"grant"==t.content_type?i.time_unit_informal&&i.time_informal&&("min"==i.time_unit_informal?a=parseInt(i.time_informal):"hour"==i.time_unit_informal?a=60*parseInt(i.time_informal):"day"==i.time_unit_informal&&(a=24*parseInt(i.time_informal)*60)):"simple"==t.content_type?i.time_unit_simple&&i.time_simple&&("min"==i.time_unit_simple?a=parseInt(i.time_simple):"hour"==i.time_unit_simple?a=60*parseInt(i.time_simple):"day"==i.time_unit_simple&&(a=24*parseInt(i.time_simple)*60)):"milestone"==t.content_type&&i.time_unit_milestone&&i.time_milestone&&("min"==i.time_unit_milestone?a=parseInt(i.time_milestone):"hour"==i.time_unit_milestone?a=60*parseInt(i.time_milestone):"day"==i.time_unit_milestone&&(a=24*parseInt(i.time_milestone)*60));var r=0,o=0,d=0,u=Z(t.created_at).add(a,"minutes").diff(Z(),"minutes");u>0&&(r=u%60,o=parseInt(u/60),d=parseInt(o/24),o%=24),l&&l.is_member?n.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:J.a.formatPriceNumber(t.euros||"","\u20ac")}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:e.renderMyVote(t)}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:e.renderRep(t)}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsxs)("div",{className:"vote-clock-wrap",children:[Object(s.jsx)(_.a,{size:14,color:"#ffffff"}),Object(s.jsx)("p",{className:"font-size-12",children:"".concat(d,"D:").concat(o,"H:").concat(r,"MIN")})]})}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderQuorum(t)})}),Object(s.jsx)("div",{className:"c-col-8 c-cols",children:Object(s.jsxs)("label",{className:"font-size-14 d-block",children:[Z(t.created_at).local().format("M/D/YYYY")," ",Z(t.created_at).local().format("h:mm A")]})})]})},"vote_".concat(c))):n.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:J.a.formatPriceNumber(t.euros||"","\u20ac")}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsxs)("div",{className:"vote-clock-wrap",children:[Object(s.jsx)(_.a,{size:14,color:"#ffffff"}),Object(s.jsx)("p",{className:"font-size-12",children:"".concat(d,"D:").concat(o,"H:").concat(r,"MIN")})]})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderQuorum(t)})}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsxs)("label",{className:"font-size-14 d-block",children:[Z(t.created_at).local().format("M/D/YYYY")," ",Z(t.created_at).local().format("h:mm A")]})})]})},"vote_".concat(c)))})),Object(s.jsx)("ul",{children:n})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"render",value:function(){var e=this.props.authUser,t=this.state,c=t.loading,l=t.search,i=e&&e.is_member?"member":"";return i+=" app-infinite-box",Object(s.jsx)(j.Fade,{distance:"20px",bottom:!0,duration:200,delay:700,children:Object(s.jsxs)("section",{id:"app-active-informal-votes-section",className:i,children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[e.is_admin?Object(s.jsx)("label",{children:"Active Informal Votes"}):Object(s.jsxs)("div",{className:"app-tooltip-wrap",children:[Object(s.jsx)("label",{children:"Active Informal Votes"}),Object(s.jsx)(q,{title:this.renderTooltip(),placement:"right-end",children:Object(s.jsx)(y.a,{size:16})})]}),Object(s.jsx)("input",{type:"text",value:l,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(s.jsx)("div",{className:"infinite-body",id:"app-active-informal-votes-sectionBody",children:c?Object(s.jsx)(W.g,{}):this.renderVotes()})]})})]})})}}]),c}(o.Component),te=Object(u.b)((function(e){return{authUser:e.global.authUser,informalBallotTableStatus:e.admin.informalBallotTableStatus,settings:e.global.settings}}))(Object(m.g)(ee));c("DZqd");function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(r.a)(e);if(t){var l=Object(r.a)(this).constructor;c=Reflect.construct(s,arguments,l)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var se=c("wd/R"),le=function(e){Object(n.a)(c,e);var t=ce(c);function c(e){var s;return Object(l.a)(this,c),s=t.call(this,e),Object(p.a)(Object(h.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(p.a)(Object(h.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,votes:[],sort_key:"timeLeft",sort_direction:"asc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(i.a)(c,[{key:"componentDidMount",value:function(){this.startTracking(),this.getVotes()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.formalBallotTableStatus;!e.formalBallotTableStatus&&t&&(this.reloadTable(),this.props.dispatch(Object(X.ib)(!1)))}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-active-formal-votes-sectionBody"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,votes:[],finished:!1},(function(){e.getVotes()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,l=t.finished,i=t.page_id;c||s||l||this.setState({page_id:i+1},(function(){e.getVotes(!1)}))}},{key:"getVotes",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,l=c.loading,i=c.finished,n=c.sort_key,a=c.sort_direction,r=c.search,o=c.page_id,d=c.votes;if(!(l||s||i)){var u={sort_key:n,sort_direction:a,search:r,page_id:o};this.props.dispatch(Object(G.Z)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.votes||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,votes:[].concat(Object(b.a)(d),Object(b.a)(c))})})))}}},{key:"clickRow",value:function(e){var t=this.props,c=t.authUser,s=t.history;c.is_guest?(this.props.dispatch(Object(X.eb)({"voting-access-alert":{render:!0,title:"Sorry, you can't access a live vote."}})),this.props.dispatch(Object(X.X)("custom-global-modal"))):s.push("/app/proposal/".concat(e.proposal_id))}},{key:"renderTriangle",value:function(e){var t=this.state,c=t.sort_key,l=t.sort_direction;return c!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==l?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,c=this.state,s=c.sort_key,l=c.sort_direction;s==e?l="asc"==l?"desc":"asc":(s=e,l="desc"),this.setState({sort_key:s,sort_direction:l},(function(){t.reloadTable()}))}},{key:"renderHeader",value:function(){var e=this,t=this.props.authUser,c=null;return c=t&&t.is_member?Object(s.jsxs)(o.Fragment,{children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Euros"})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"My Vote"})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Rep"})}),Object(s.jsxs)("div",{className:"c-col-6 c-cols",onClick:function(){return e.clickHeader("timeLeft")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Time Left"}),this.renderTriangle("timeLeft")]}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Quorum"})}),Object(s.jsxs)("div",{className:"c-col-8 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Submitted"}),this.renderTriangle("vote.created_at")]})]}):Object(s.jsxs)(o.Fragment,{children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Euros"})}),Object(s.jsxs)("div",{className:"c-col-4 c-cols",onClick:function(){return e.clickHeader("timeLeft")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Time Left"}),this.renderTriangle("timeLeft")]}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Quorum"})}),Object(s.jsxs)("div",{className:"c-col-6 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Submitted"}),this.renderTriangle("vote.created_at")]})]}),Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsx)("div",{className:"infinite-headerInner",children:c})})}},{key:"renderMyVote",value:function(e){return this.props.authUser.id==e.user_id?Object(s.jsx)("label",{className:"font-size-14 d-block",children:"-"}):e.vote_result_type?"for"==e.vote_result_type?Object(s.jsx)("a",{className:"btn btn-success extra-small",children:"For"}):Object(s.jsx)("a",{className:"btn btn-danger extra-small",children:"Against"}):Object(s.jsx)("a",{className:"btn btn-primary extra-small",children:"None"})}},{key:"renderRep",value:function(e){return this.props.authUser.id==e.user_id?Object(s.jsx)("label",{className:"font-size-14 d-block",children:"-"}):Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.vote_result_value||0})}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderTooltip",value:function(){return Object(s.jsx)(o.Fragment,{children:Object(s.jsx)("p",{className:"font-size-13",children:"This area displays formal votes currently in progress. If you are a Voting Associate, you should review and vote."})})}},{key:"renderQuorum",value:function(e){var t=this.props.settings,c=0;if("simple"===e.content_type?c=+t.quorum_rate_simple:"grant"===e.content_type?c=+t.quorum_rate:"milestone"===e.content_type&&(c=+t.quorum_rate_milestone),c){var l=+e.result_count/+e.total_member>=+c/100;return Object(s.jsxs)("div",{className:"font-size-14",children:[Object(s.jsx)("label",{children:e.result_count})," /"," ",Object(s.jsx)("label",{className:"pr-2",children:e.total_member}),l?Object(s.jsx)(N,{size:"14"}):Object(s.jsx)(k.a,{size:"14"})]})}}},{key:"renderVotes",value:function(){var e=this,t=this.state.votes,c=this.props,l=c.authUser,i=c.settings,n=[];return t&&t.length?(t.forEach((function(t,c){var a=0;"grant"==t.content_type?i.time_unit_formal&&i.time_formal&&("min"==i.time_unit_formal?a=parseInt(i.time_formal):"hour"==i.time_unit_formal?a=60*parseInt(i.time_formal):"day"==i.time_unit_formal&&(a=24*parseInt(i.time_formal)*60)):"simple"==t.content_type?i.time_unit_simple&&i.time_simple&&("min"==i.time_unit_simple?a=parseInt(i.time_simple):"hour"==i.time_unit_simple?a=60*parseInt(i.time_simple):"day"==i.time_unit_simple&&(a=24*parseInt(i.time_simple)*60)):"milestone"==t.content_type&&i.time_unit_milestone&&i.time_milestone&&("min"==i.time_unit_milestone?a=parseInt(i.time_milestone):"hour"==i.time_unit_milestone?a=60*parseInt(i.time_milestone):"day"==i.time_unit_milestone&&(a=24*parseInt(i.time_milestone)*60));var r=0,o=0,d=0,u=se(t.created_at).add(a,"minutes").diff(se(),"minutes");u>0&&(r=u%60,o=parseInt(u/60),d=parseInt(o/24),o%=24),l&&l.is_member?n.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:J.a.formatPriceNumber(t.euros||"","\u20ac")}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:e.renderMyVote(t)}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:e.renderRep(t)}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsxs)("div",{className:"vote-clock-wrap",children:[Object(s.jsx)(_.a,{size:14,color:"#ffffff"}),Object(s.jsx)("p",{className:"font-size-12",children:"".concat(d,"D:").concat(o,"H:").concat(r,"MIN")})]})}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:e.renderQuorum(t)}),Object(s.jsx)("div",{className:"c-col-8 c-cols",children:Object(s.jsxs)("label",{className:"font-size-14 d-block",children:[se(t.created_at).local().format("M/D/YYYY")," ",se(t.created_at).local().format("h:mm A")]})})]})},"vote_".concat(c))):n.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:J.a.formatPriceNumber(t.euros||"","\u20ac")}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsxs)("div",{className:"vote-clock-wrap",children:[Object(s.jsx)(_.a,{size:14,color:"#ffffff"}),Object(s.jsx)("p",{className:"font-size-12",children:"".concat(d,"D:").concat(o,"H:").concat(r,"MIN")})]})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:e.renderQuorum(t)})}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsxs)("label",{className:"font-size-14 d-block",children:[se(t.created_at).local().format("M/D/YYYY")," ",se(t.created_at).local().format("h:mm A")]})})]})},"vote_".concat(c)))})),Object(s.jsx)("ul",{children:n})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"render",value:function(){var e=this.props.authUser,t=this.state,c=t.loading,l=t.search,i=e&&e.is_member?"member":"";return i+=" app-infinite-box",Object(s.jsx)(j.Fade,{distance:"20px",bottom:!0,duration:200,delay:700,children:Object(s.jsxs)("section",{id:"app-active-formal-votes-section",className:i,children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[e.is_admin?Object(s.jsx)("label",{children:"Active Formal Votes"}):Object(s.jsxs)("div",{className:"app-tooltip-wrap",children:[Object(s.jsx)("label",{children:"Active Formal Votes"}),Object(s.jsx)(q,{title:this.renderTooltip(),placement:"right-end",children:Object(s.jsx)(y.a,{size:16})})]}),Object(s.jsx)("input",{type:"text",value:l,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(s.jsx)("div",{className:"infinite-body",id:"app-active-formal-votes-sectionBody",children:c?Object(s.jsx)(W.g,{}):this.renderVotes()})]})})]})})}}]),c}(o.Component),ie=Object(u.b)((function(e){return{authUser:e.global.authUser,formalBallotTableStatus:e.admin.formalBallotTableStatus,settings:e.global.settings}}))(Object(m.g)(le));c("gTb6");function ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(r.a)(e);if(t){var l=Object(r.a)(this).constructor;c=Reflect.construct(s,arguments,l)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var ae=c("wd/R"),re=function(e){Object(n.a)(c,e);var t=ne(c);function c(e){var s;return Object(l.a)(this,c),s=t.call(this,e),Object(p.a)(Object(h.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(p.a)(Object(h.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,votes:[],sort_key:"vote.id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(i.a)(c,[{key:"componentDidMount",value:function(){this.startTracking(),this.getVotes()}},{key:"componentDidUpdate",value:function(e){var t=this.props.completedVotesTableStatus;!e.completedVotesTableStatus&&t&&(this.reloadTable(),this.props.dispatch(Object(X.db)(!1)))}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-completed-votes-sectionBody"),this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,votes:[],finished:!1},(function(){e.getVotes()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,l=t.finished,i=t.page_id;c||s||l||this.setState({page_id:i+1},(function(){e.getVotes(!1)}))}},{key:"getVotes",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,l=c.loading,i=c.finished,n=c.sort_key,a=c.sort_direction,r=c.search,o=c.page_id,d=c.votes;if(!(l||s||i)){var u={sort_key:n,sort_direction:a,search:r,page_id:o};this.props.dispatch(Object(G.mb)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.votes||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,votes:[].concat(Object(b.a)(d),Object(b.a)(c))})})))}}},{key:"clickRow",value:function(e){var t=this.props,c=t.authUser,s=t.history;if(c.is_member||c.is_admin||c.is_participant||c.id==e.user_id){var l="/app/proposal/".concat(e.proposal_id,"/informal-vote");"milestone"==e.content_type?l="/app/proposal/".concat(e.proposal_id,"/milestone-vote/").concat(e.id):"formal"==e.type&&(l="/app/proposal/".concat(e.proposal_id,"/formal-vote")),s.push(l)}else this.props.dispatch(Object(X.eb)({"voting-access-alert":{render:!0,title:"Sorry, only voting associates may access a live vote."}})),this.props.dispatch(Object(X.X)("custom-global-modal"))}},{key:"renderTriangle",value:function(e){var t=this.state,c=t.sort_key,l=t.sort_direction;return c!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==l?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,c=this.state,s=c.sort_key,l=c.sort_direction;s==e?l="asc"==l?"desc":"asc":(s=e,l="desc"),this.setState({sort_key:s,sort_direction:l},(function(){t.reloadTable()}))}},{key:"clickRevote",value:function(e){this.props.dispatch(Object(X.eb)({revote:{render:!0,title:"You are restarting this vote",data:e}})),this.props.dispatch(Object(X.X)("custom-global-modal"))}},{key:"renderHeader",value:function(){var e=this,t=this.props.authUser,c=null;return c=t&&t.is_member?Object(s.jsxs)(o.Fragment,{children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Type"}),this.renderTriangle("vote.type")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Euros"})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"My Vote"})}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Rep"})}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Result"})}),Object(s.jsx)("div",{className:"c-col-8 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Stake For/Against"})}),Object(s.jsx)("div",{className:"c-col-9 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Quorum"})}),Object(s.jsxs)("div",{className:"c-col-10 c-cols",onClick:function(){return e.clickHeader("vote.updated_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Completed Date"}),this.renderTriangle("vote.updated_at")]})]}):Object(s.jsxs)(o.Fragment,{children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Type"}),this.renderTriangle("vote.type")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Euros"})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Result"})}),Object(s.jsx)("div",{className:"c-col-6 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Stake For/Against"})}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Quorum"})}),Object(s.jsxs)("div",{className:"c-col-8 c-cols",onClick:function(){return e.clickHeader("vote.updated_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Completed Date"}),this.renderTriangle("vote.updated_at")]})]}),Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsx)("div",{className:"infinite-headerInner",children:c})})}},{key:"renderMyVote",value:function(e){return this.props.authUser.id==e.user_id?Object(s.jsx)("label",{className:"font-size-14 d-block",children:"-"}):e.vote_result_type?"for"==e.vote_result_type?Object(s.jsx)("a",{className:"btn btn-success extra-small",children:"For"}):Object(s.jsx)("a",{className:"btn btn-danger extra-small",children:"Against"}):Object(s.jsx)("a",{className:"btn btn-primary extra-small",children:"None"})}},{key:"renderRep",value:function(e){return this.props.authUser.id==e.user_id?Object(s.jsx)("label",{className:"font-size-14 d-block",children:"-"}):Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.vote_result_value||0})}},{key:"renderResult",value:function(e){return e.result_count&&"success"==e.result?Object(s.jsx)("label",{className:"font-size-14 color-success d-block",children:"Pass"}):"no-quorum"==e.result?Object(s.jsx)("label",{className:"font-size-14 color-danger d-block",children:"No Quorum"}):Object(s.jsx)("label",{className:"font-size-14 color-danger d-block",children:"Fail"})}},{key:"renderStake",value:function(e){return e.result_count&&"success"==e.result?Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{className:"font-size-14 color-success",children:e.for_value}),"\xa0","/","\xa0",Object(s.jsx)("label",{className:"font-size-14",children:e.against_value})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{className:"font-size-14",children:e.for_value}),"\xa0","/","\xa0",Object(s.jsx)("label",{className:"font-size-14 color-danger",children:e.against_value})]})}},{key:"renderQuorum",value:function(e){var t=this,c=this.props.authUser;if("no-quorum"==e.result){var l=!1;return(c.is_admin||c.id==e.user_id)&&(l=!0),Object(s.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(s.jsxs)("div",{className:"font-size-14 color-danger text-nowrap",children:[Object(s.jsx)("label",{children:e.result_count})," /"," ",Object(s.jsx)("label",{children:c.totalMembers})]}),l?Object(s.jsx)("a",{style:{marginLeft:"10px"},className:"btn btn-primary extra-small btn-fluid-small",onClick:function(){return t.clickRevote(e)},children:"Revote"}):null]})}return Object(s.jsxs)("div",{className:"font-size-14 color-success",children:[Object(s.jsx)("label",{children:e.result_count})," /"," ",Object(s.jsx)("label",{children:c.totalMembers})]})}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderTooltip",value:function(){return Object(s.jsx)(o.Fragment,{children:Object(s.jsx)("p",{className:"font-size-13",children:"This area displays the votes that have already completed in the system."})})}},{key:"renderVotes",value:function(){var e=this,t=this.state.votes,c=this.props.authUser,l=[];return t&&t.length?(t.forEach((function(t,i){c&&c.is_member?l.push(Object(s.jsx)("li",{children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"informal"==t.type?"Informal":"Formal"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",onClick:function(){return e.clickRow(t)},children:J.a.formatPriceNumber(t.euros||"","\u20ac")}),Object(s.jsx)("div",{className:"c-col-5 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderMyVote(t)}),Object(s.jsx)("div",{className:"c-col-6 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderRep(t)}),Object(s.jsx)("div",{className:"c-col-7 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderResult(t)}),Object(s.jsx)("div",{className:"c-col-8 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderStake(t)}),Object(s.jsx)("div",{className:"c-col-9 c-cols",children:e.renderQuorum(t)}),Object(s.jsx)("div",{className:"c-col-10 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("label",{className:"font-size-14 d-block",children:[ae(t.updated_at).local().format("M/D/YYYY")," ",ae(t.updated_at).local().format("h:mm A")]})})]})},"vote_".concat(i))):l.push(Object(s.jsx)("li",{children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"informal"==t.type?"Informal":"Formal"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsx)("label",{className:"font-size-14 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",onClick:function(){return e.clickRow(t)},children:J.a.formatPriceNumber(t.euros||"","\u20ac")}),Object(s.jsx)("div",{className:"c-col-5 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderResult(t)}),Object(s.jsx)("div",{className:"c-col-6 c-cols",onClick:function(){return e.clickRow(t)},children:e.renderStake(t)}),Object(s.jsx)("div",{className:"c-col-7 c-cols",children:e.renderQuorum(t)}),Object(s.jsx)("div",{className:"c-col-8 c-cols",onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("label",{className:"font-size-14 d-block",children:[ae(t.updated_at).local().format("M/D/YYYY")," ",ae(t.updated_at).local().format("h:mm A")]})})]})},"vote_".concat(i)))})),Object(s.jsx)("ul",{children:l})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"render",value:function(){var e=this.props.authUser,t=this.state,c=t.loading,l=t.search,i=e&&e.is_member?"member":"";return i+=" app-infinite-box",Object(s.jsx)(j.Fade,{distance:"20px",bottom:!0,duration:200,delay:700,children:Object(s.jsxs)("section",{id:"app-completed-votes-section",className:i,children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[e.is_admin?Object(s.jsx)("label",{children:"Completed Votes"}):Object(s.jsxs)("div",{className:"app-tooltip-wrap",children:[Object(s.jsx)("label",{children:"Completed Votes"}),Object(s.jsx)(q,{title:this.renderTooltip(),placement:"right-end",children:Object(s.jsx)(y.a,{size:16})})]}),Object(s.jsx)("input",{type:"text",value:l,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[this.renderHeader(),Object(s.jsx)("div",{className:"infinite-body",id:"app-completed-votes-sectionBody",children:c?Object(s.jsx)(W.g,{}):this.renderVotes()})]})})]})})}}]),c}(o.Component),oe=Object(u.b)((function(e){return{authUser:e.global.authUser,settings:e.global.settings,completedVotesTableStatus:e.admin.completedVotesTableStatus}}))(Object(m.g)(re));c("3ase");function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(r.a)(e);if(t){var l=Object(r.a)(this).constructor;c=Reflect.construct(s,arguments,l)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var ue=function(e){Object(n.a)(c,e);var t=de(c);function c(e){var s;return Object(l.a)(this,c),(s=t.call(this,e)).state={tab:"active"},s}return Object(i.a)(c,[{key:"render",value:function(){var e=this,t=this.props.authUser,c=this.state.tab;return t&&t.id?Object(s.jsxs)("div",{id:"app-votes-page",children:[Object(s.jsx)(j.Fade,{distance:"20px",bottom:!0,duration:400,delay:600,children:Object(s.jsxs)("ul",{id:"app-votes-pageHeader",children:[Object(s.jsx)("li",{className:"active"==c?"active":"",onClick:function(){return e.setState({tab:"active"})},children:"Active"}),Object(s.jsx)("li",{className:"completed"==c?"active":"",onClick:function(){return e.setState({tab:"completed"})},children:"Completed"})]})}),"active"==c?Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(te,{}),Object(s.jsx)(ie,{})]}):Object(s.jsx)(o.Fragment,{children:Object(s.jsx)(oe,{})})]}):null}}]),c}(o.Component);t.default=Object(u.b)((function(e){return{authUser:e.global.authUser}}))(Object(m.g)(ue))}}]);
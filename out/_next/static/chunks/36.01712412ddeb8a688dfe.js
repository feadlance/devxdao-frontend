(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[36],{mCOC:function(e,t,c){"use strict";c.r(t);var s=c("nKUr"),i=c("1OyB"),n=c("vuIU"),r=c("Ji7U"),a=c("md7G"),l=c("foSv"),o=c("q1tI"),d=c("/MKj"),u=c("o0o1"),p=c.n(u),h=c("HaE+"),j=c("JX7q"),b=c("rePB"),f=c("Ty5D"),m=c("s/m+"),O=c("YW6W"),v=c("ZpDd"),g=c("55Ip"),y=(c("v1O5"),c("LADp"));function x(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,s)}return c}function _(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?x(Object(c),!0).forEach((function(t){Object(b.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):x(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;c=Reflect.construct(s,arguments,i)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var N=function(e){Object(r.a)(c,e);var t=k(c);function c(){var e;Object(i.a)(this,c);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n)),Object(b.a)(Object(j.a)(e),"clickRegister",function(){var t=Object(h.a)(p.a.mark((function t(c){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),s=e.props.history,O.a.storeUser({}),t.next=5,e.props.dispatch(Object(v.W)({}));case 5:s.push("/register/form");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(b.a)(Object(j.a)(e),"dismiss",(function(t){t.preventDefault(),e.props.dispatch(Object(y.L)((function(){e.props.dispatch(Object(v.Ab)())}),(function(t){if(t.success){var c=e.props.authUser;c.press_dismiss=1,e.props.dispatch(Object(v.W)(_({},c)))}e.props.dispatch(Object(v.T)())})))})),e}return Object(n.a)(c,[{key:"render",value:function(){var e=this.props.authUser;return e&&e.id?e.is_admin||e.press_dismiss?null:Object(s.jsx)(m.Fade,{distance:"20px",right:!0,duration:200,delay:500,children:Object(s.jsxs)("div",{id:"app-newgrant-box",className:"new-member",children:[Object(s.jsx)("img",{src:"/parts.png",alt:""}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{className:"font-weight-700",children:"Welcome to the portal! Are you here to submit a grant request?"}),Object(s.jsx)("p",{className:"font-size-12",children:'Click the "My Proposals" tab to the left, then the button for "New Grant Proposal" to start the process. Please be aware that grants require a 100 Euro DOS Fee for all applications.'})]}),Object(s.jsxs)("div",{className:"d-flex flex-column actions",children:[Object(s.jsx)(g.b,{to:"/app/proposals",className:"btn btn-primary less-small mb-1",children:"Request grant"}),Object(s.jsx)("button",{className:"btn btn-primary less-small mt-1",onClick:this.dismiss,children:"Dismiss alert"})]})]})}):null}}]),c}(o.Component),T=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(f.g)(N));c("bq4S");function S(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,s)}return c}function w(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?S(Object(c),!0).forEach((function(t){Object(b.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):S(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;c=Reflect.construct(s,arguments,i)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var z=function(e){Object(r.a)(c,e);var t=R(c);function c(){var e;Object(i.a)(this,c);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n)),Object(b.a)(Object(j.a)(e),"clickRegister",function(){var t=Object(h.a)(p.a.mark((function t(c){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),s=e.props.history,O.a.storeUser({}),t.next=5,e.props.dispatch(Object(v.W)({}));case 5:s.push("/register/form");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(b.a)(Object(j.a)(e),"dismiss",(function(t){t.preventDefault(),e.props.dispatch(Object(y.K)((function(){e.props.dispatch(Object(v.Ab)())}),(function(t){if(t.success){var c=e.props.authUser;c.check_first_compeleted_proposal=0,e.props.dispatch(Object(v.W)(w({},c)))}e.props.dispatch(Object(v.T)())})))})),e}return Object(n.a)(c,[{key:"render",value:function(){var e=this.props.authUser;return e&&e.id&&!e.is_admin&&0===e.is_member&&1===e.is_participant&&e.check_first_compeleted_proposal?Object(s.jsx)(m.Fade,{distance:"20px",right:!0,duration:200,delay:500,children:Object(s.jsxs)("div",{id:"app-firstgrant-box",className:"new-member",children:[Object(s.jsx)("img",{src:"/parts.png",alt:""}),Object(s.jsx)("div",{children:Object(s.jsx)("label",{children:"Congratulations, you finished your first grant. You may be eligible to become a voting associate. Please reach out in telegram for more details if interested."})}),Object(s.jsxs)("div",{className:"d-flex flex-column actions",children:[Object(s.jsx)("a",{target:"_blank",href:"https://t.me/devxdao",className:"btn btn-primary less-small mb-1",rel:"noreferrer",children:"Go to telegram"}),Object(s.jsx)("button",{className:"btn btn-primary less-small mt-1",onClick:this.dismiss,children:"Dismiss this notice"})]})]})}):null}}]),c}(o.Component),P=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(f.g)(z)),D=c("KQm4"),C=c("e+cM"),U=(c("bSi4"),c("xzuf"));function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;c=Reflect.construct(s,arguments,i)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var $=c("wd/R"),B=function(e){Object(r.a)(c,e);var t=I(c);function c(e){var s;return Object(i.a)(this,c),s=t.call(this,e),Object(b.a)(Object(j.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(b.a)(Object(j.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,votes:[],sort_key:"vote.id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(n.a)(c,[{key:"componentDidMount",value:function(){this.startTracking(),this.getVotes()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"componentDidUpdate",value:function(e){var t=this.props.formalBallotTableStatus;!e.formalBallotTableStatus&&t&&(this.reloadTable(),this.props.dispatch(Object(v.ib)(!1)))}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-formal-ballots-sectionBody"),this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,votes:[],finished:!1},(function(){e.getVotes()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,i=t.finished,n=t.page_id;c||s||i||this.setState({page_id:n+1},(function(){e.getVotes(!1)}))}},{key:"getVotes",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,i=c.loading,n=c.finished,r=c.sort_key,a=c.sort_direction,l=c.search,o=c.page_id,d=c.votes;if(!(i||s||n)){var u={sort_key:r,sort_direction:a,search:l,page_id:o};this.props.dispatch(Object(y.Z)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.votes||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,votes:[].concat(Object(D.a)(d),Object(D.a)(c))})})))}}},{key:"clickRow",value:function(e){var t=this.props,c=t.authUser,s=t.history;c.is_member||c.is_admin||c.id==e.user_id?(c.is_admin||c.id==e.user_id||c.is_member)&&s.push("/app/proposal/".concat(e.proposal_id)):(c.is_participant||c.is_guest)&&(this.props.dispatch(Object(v.eb)({"voting-access-alert":{render:!0,title:"Sorry, only voting associates may access a live vote."}})),this.props.dispatch(Object(v.X)("custom-global-modal")))}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderTimeRemaining",value:function(e){var t=0,c=this.props.settings;"grant"==e.content_type?"min"==c.time_unit_formal?t=parseInt(c.time_formal):"hour"==c.time_unit_formal?t=60*parseInt(c.time_formal):"day"==c.time_unit_formal&&(t=24*parseInt(c.time_formal)*60):"simple"==e.content_type?"min"==c.time_unit_simple?t=parseInt(c.time_simple):"hour"==c.time_unit_simple?t=60*parseInt(c.time_simple):"day"==c.time_unit_simple&&(t=24*parseInt(c.time_simple)*60):"milestone"==e.content_type&&("min"==c.time_unit_milestone?t=parseInt(c.time_milestone):"hour"==c.time_unit_milestone?t=60*parseInt(c.time_milestone):"day"==c.time_unit_milestone&&(t=24*parseInt(c.time_milestone)*60));var i=$(e.created_at).add(t,"minutes");return Object(s.jsx)(U.a,{lastTime:i})}},{key:"renderVotes",value:function(){var e=this,t=this.state.votes,c=[];return t&&t.length?(t.forEach((function(t,i){c.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:$(t.created_at).fromNow()})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:e.renderTimeRemaining(t)})})]})},"vote_".concat(i)))})),Object(s.jsx)("ul",{children:c})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-12",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,c=t.sort_key,i=t.sort_direction;return c!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==i?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,c=this.state,s=c.sort_key,i=c.sort_direction;s==e?i="asc"==i?"desc":"asc":(s=e,i="desc"),this.setState({sort_key:s,sort_direction:i},(function(){t.reloadTable()}))}},{key:"render",value:function(){var e=this,t=this.state,c=t.loading,i=t.search,n=this.props.authUser;return n&&n.id?Object(s.jsx)(m.Fade,{distance:"20px",right:!0,duration:500,delay:500,children:Object(s.jsxs)("section",{id:"app-formal-ballots-section",className:"app-infinite-box",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsx)("label",{children:"Active Formal Ballots"}),Object(s.jsx)("input",{type:"text",value:i,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Submitted"}),this.renderTriangle("vote.created_at")]}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12",children:"Time Remaining"})})]})}),Object(s.jsx)("div",{className:"infinite-body",id:"app-formal-ballots-sectionBody",children:c?Object(s.jsx)(C.f,{}):this.renderVotes()})]})})]})}):null}}]),c}(o.Component),H=Object(d.b)((function(e){return{authUser:e.global.authUser,formalBallotTableStatus:e.admin.formalBallotTableStatus,settings:e.global.settings}}))(Object(f.g)(B));c("AxTd");function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;c=Reflect.construct(s,arguments,i)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var F=c("wd/R"),A=function(e){Object(r.a)(c,e);var t=E(c);function c(e){var s;return Object(i.a)(this,c),s=t.call(this,e),Object(b.a)(Object(j.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(b.a)(Object(j.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,votes:[],sort_key:"vote.id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(n.a)(c,[{key:"componentDidMount",value:function(){this.startTracking(),this.getVotes()}},{key:"componentDidUpdate",value:function(e){var t=this.props.informalBallotTableStatus;!e.informalBallotTableStatus&&t&&(this.reloadTable(),this.props.dispatch(Object(v.lb)(!1)))}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-informal-ballots-sectionBody"),this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,votes:[],finished:!1},(function(){e.getVotes()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,i=t.finished,n=t.page_id;c||s||i||this.setState({page_id:n+1},(function(){e.getVotes(!1)}))}},{key:"getVotes",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,i=c.loading,n=c.finished,r=c.sort_key,a=c.sort_direction,l=c.search,o=c.page_id,d=c.votes;if(!(i||s||n)){var u={sort_key:r,sort_direction:a,search:l,page_id:o};this.props.dispatch(Object(y.ab)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.votes||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,votes:[].concat(Object(D.a)(d),Object(D.a)(c))})})))}}},{key:"clickRow",value:function(e){var t=this.props,c=t.authUser,s=t.history;c.is_member||c.is_admin?s.push("/app/proposal/".concat(e.proposal_id)):c.is_participant&&(e.user_id==c.id?s.push("/app/proposal/".concat(e.proposal_id)):(this.props.dispatch(Object(v.eb)({"voting-access-alert":{render:!0,title:"Sorry, only voting associates may access a live vote."}})),this.props.dispatch(Object(v.X)("custom-global-modal"))))}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderTimeRemaining",value:function(e){var t=0,c=this.props.settings;"grant"==e.content_type?"min"==c.time_unit_informal?t=parseInt(c.time_informal):"hour"==c.time_unit_informal?t=60*parseInt(c.time_informal):"day"==c.time_unit_informal&&(t=24*parseInt(c.time_informal)*60):"simple"==e.content_type?"min"==c.time_unit_simple?t=parseInt(c.time_simple):"hour"==c.time_unit_simple?t=60*parseInt(c.time_simple):"day"==c.time_unit_simple&&(t=24*parseInt(c.time_simple)*60):"milestone"==e.content_type&&("min"==c.time_unit_milestone?t=parseInt(c.time_milestone):"hour"==c.time_unit_milestone?t=60*parseInt(c.time_milestone):"day"==c.time_unit_milestone&&(t=24*parseInt(c.time_milestone)*60));var i=F(e.created_at).add(t,"minutes");return Object(s.jsx)(U.a,{lastTime:i})}},{key:"renderVotes",value:function(){var e=this,t=this.state.votes,c=[];return t&&t.length?(t.forEach((function(t,i){c.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:t.proposalId})}),Object(s.jsx)("div",{className:"c-col-1 c-cols",children:Object(s.jsx)("label",{className:"font-size-12",children:e.renderTitle(t)})}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:"grant"==t.content_type?"Grant":"simple"==t.content_type?"Simple":"Milestone"})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:F(t.created_at).fromNow()})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12 d-block",children:e.renderTimeRemaining(t)})})]})},"vote_".concat(i)))})),Object(s.jsx)("ul",{children:c})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-12",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,c=t.sort_key,i=t.sort_direction;return c!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==i?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,c=this.state,s=c.sort_key,i=c.sort_direction;s==e?i="asc"==i?"desc":"asc":(s=e,i="desc"),this.setState({sort_key:s,sort_direction:i},(function(){t.reloadTable()}))}},{key:"render",value:function(){var e=this,t=this.state,c=t.loading,i=t.search,n=this.props.authUser;return n&&n.id?Object(s.jsx)(m.Fade,{distance:"20px",right:!0,duration:500,delay:400,children:Object(s.jsxs)("section",{id:"app-informal-ballots-section",className:"app-infinite-box",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsx)("label",{children:"Active Informal Ballots"}),Object(s.jsx)("input",{type:"text",value:i,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("vote.content_type")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Ballot Type"}),this.renderTriangle("vote.content_type")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("vote.created_at")},children:[Object(s.jsx)("label",{className:"font-size-12",children:"Submitted"}),this.renderTriangle("vote.created_at")]}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsx)("label",{className:"font-size-12",children:"Time Remaining"})})]})}),Object(s.jsx)("div",{className:"infinite-body",id:"app-informal-ballots-sectionBody",children:c?Object(s.jsx)(C.f,{}):this.renderVotes()})]})})]})}):null}}]),c}(o.Component),V=Object(d.b)((function(e){return{authUser:e.global.authUser,informalBallotTableStatus:e.admin.informalBallotTableStatus,settings:e.global.settings}}))(Object(f.g)(A)),M=c("ahwF"),W=c("syaQ"),L=c("I6fM");c("yh/M");function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;c=Reflect.construct(s,arguments,i)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var q=c("wd/R"),G=function(e){Object(r.a)(c,e);var t=Y(c);function c(e){var s;return Object(i.a)(this,c),s=t.call(this,e),Object(b.a)(Object(j.a)(s),"trackScroll",(function(){s.$elem&&s.$elem.scrollTop+s.$elem.clientHeight>=s.$elem.scrollHeight&&s.runNextPage()})),Object(b.a)(Object(j.a)(s),"handleSearch",(function(e){s.setState({search:e.target.value},(function(){s.timer&&(clearTimeout(s.timer),s.timer=null),s.timer=setTimeout((function(){s.reloadTable()}),500)}))})),s.state={loading:!1,proposals:[],sort_key:"proposal.id",sort_direction:"desc",search:"",page_id:1,calling:!1,finished:!1},s.$elem=null,s.timer=null,s}return Object(n.a)(c,[{key:"componentDidMount",value:function(){this.startTracking(),this.getProposals()}},{key:"componentWillUnmount",value:function(){this.$elem&&this.$elem.removeEventListener("scroll",this.trackScroll)}},{key:"startTracking",value:function(){this.$elem=document.getElementById("app-proposals-sectionBody"),this.$elem&&this.$elem.addEventListener("scroll",this.trackScroll)}},{key:"reloadTable",value:function(){var e=this;this.setState({page_id:1,proposals:[],finished:!1},(function(){e.getProposals()}))}},{key:"runNextPage",value:function(){var e=this,t=this.state,c=t.calling,s=t.loading,i=t.finished,n=t.page_id;c||s||i||this.setState({page_id:n+1},(function(){e.getProposals(!1)}))}},{key:"getProposals",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this.state,s=c.calling,i=c.loading,n=c.finished,r=c.sort_key,a=c.sort_direction,l=c.search,o=c.page_id,d=c.proposals;if(!(i||s||n)){var u={sort_key:r,sort_direction:a,search:l,page_id:o,limit:20};this.props.dispatch(Object(y.Y)(u,(function(){t?e.setState({loading:!0,calling:!0}):e.setState({loading:!1,calling:!0})}),(function(t){var c=t.proposals||[],s=t.finished||!1;e.setState({loading:!1,calling:!1,finished:s,proposals:[].concat(Object(D.a)(d),Object(D.a)(c))})})))}}},{key:"clickRow",value:function(e){var t=this.props,c=t.history,s=t.authUser;if(s&&s.is_admin)c.push("/app/proposal/".concat(e.id));else{if("approved"!=e.status)return;s.is_member?c.push("/app/proposal/".concat(e.id)):e.votes&&e.votes.length||c.push("/app/proposal/".concat(e.id))}}},{key:"renderTitle",value:function(e){return e.title}},{key:"renderProposals",value:function(){var e=this,t=this.state.proposals,c=[];return t&&t.length?(t.forEach((function(t,i){c.push(Object(s.jsx)("li",{onClick:function(){return e.clickRow(t)},children:Object(s.jsxs)("div",{className:"infinite-row",children:[Object(s.jsx)("div",{className:"c-col-0 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:t.id})}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",children:[Object(s.jsx)("label",{className:"font-size-14 font-weight-700",children:e.renderTitle(t)}),Object(s.jsx)("p",{className:"font-size-12",children:O.a.getExcerpt(t.short_description)})]}),Object(s.jsx)("div",{className:"c-col-2 c-cols",children:Object(s.jsxs)("div",{className:"proposal-image-wrap",children:[Object(s.jsx)("div",{children:Object(s.jsx)(M.a,{size:20})}),Object(s.jsx)("span",{className:"font-size-12",children:t.comments})]})}),Object(s.jsx)("div",{className:"c-col-3 c-cols",children:Object(s.jsxs)("div",{className:"proposal-image-wrap",children:[Object(s.jsx)("div",{children:Object(s.jsx)(W.a,{size:20})}),Object(s.jsx)("span",{className:"font-size-12",children:t.changes})]})}),Object(s.jsx)("div",{className:"c-col-4 c-cols",children:Object(s.jsxs)("label",{className:"font-size-14",children:[q(t.created_at).local().format("M/D/YYYY")," ",q(t.created_at).local().format("h:mm A")]})}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)(U.a,{lastTime:q(t.created_at),isCountUp:!0})})]})},"proposal_".concat(i)))})),Object(s.jsx)("ul",{children:c})):Object(s.jsx)("div",{id:"infinite-no-result",children:Object(s.jsx)("label",{className:"font-size-14",children:"No Results Found"})})}},{key:"renderTriangle",value:function(e){var t=this.state,c=t.sort_key,i=t.sort_direction;return c!=e?Object(s.jsx)("span",{className:"inactive",children:"\u25b2"}):"asc"==i?Object(s.jsx)("span",{children:"\u25b2"}):Object(s.jsx)("span",{children:"\u25bc"})}},{key:"clickHeader",value:function(e){var t=this,c=this.state,s=c.sort_key,i=c.sort_direction;s==e?i="asc"==i?"desc":"asc":(s=e,i="desc"),this.setState({sort_key:s,sort_direction:i},(function(){t.reloadTable()}))}},{key:"render",value:function(){var e=this,t=this.state,c=t.loading,i=t.search;return Object(s.jsx)(m.Fade,{distance:"20px",bottom:!0,duration:200,delay:700,children:Object(s.jsxs)("section",{id:"app-proposals-section",className:"app-infinite-box",children:[Object(s.jsxs)("div",{className:"app-infinite-search-wrap",children:[Object(s.jsxs)("label",{children:["Active Discussions\xa0\xa0",Object(s.jsx)(L.a,{size:16})]}),Object(s.jsx)("input",{type:"text",value:i,onChange:this.handleSearch,placeholder:"Search..."})]}),Object(s.jsx)("div",{className:"infinite-content",children:Object(s.jsxs)("div",{className:"infinite-contentInner",children:[Object(s.jsx)("div",{className:"infinite-header",children:Object(s.jsxs)("div",{className:"infinite-headerInner",children:[Object(s.jsxs)("div",{className:"c-col-0 c-cols",onClick:function(){return e.clickHeader("proposal.id")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"#"}),this.renderTriangle("proposal.id")]}),Object(s.jsxs)("div",{className:"c-col-1 c-cols",onClick:function(){return e.clickHeader("proposal.title")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Title"}),this.renderTriangle("proposal.title")]}),Object(s.jsxs)("div",{className:"c-col-2 c-cols",onClick:function(){return e.clickHeader("proposal.comments")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Comments"}),this.renderTriangle("proposal.comments")]}),Object(s.jsxs)("div",{className:"c-col-3 c-cols",onClick:function(){return e.clickHeader("proposal.changes")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Changes"}),this.renderTriangle("proposal.changes")]}),Object(s.jsxs)("div",{className:"c-col-4 c-cols",onClick:function(){return e.clickHeader("proposal.created_at")},children:[Object(s.jsx)("label",{className:"font-size-14",children:"Date"}),this.renderTriangle("proposal.created_at")]}),Object(s.jsx)("div",{className:"c-col-5 c-cols",children:Object(s.jsx)("label",{className:"font-size-14",children:"Time Active"})})]})}),Object(s.jsx)("div",{className:"infinite-body",id:"app-proposals-sectionBody",children:c?Object(s.jsx)(C.f,{}):this.renderProposals()})]})})]})})}}]),c}(o.Component),K=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(f.g)(G)),J=c("H2Bi"),X=c("5svO");c("wroK"),c("7Rrz");function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;c=Reflect.construct(s,arguments,i)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var Z=function(e){Object(r.a)(c,e);var t=Q(c);function c(){return Object(i.a)(this,c),t.apply(this,arguments)}return Object(n.a)(c,[{key:"render",value:function(){var e=this.props.authUser;return e&&e.id&&e.is_member&&e.has_survey?Object(s.jsx)(m.Fade,{distance:"20px",right:!0,duration:200,delay:500,children:Object(s.jsx)("div",{id:"app-newgrant-box",className:"new-member",children:Object(s.jsx)("div",{children:Object(s.jsxs)("label",{className:"font-weight-700",children:["A survey is active! Please respond to your survey in the survey"," ","tab in the left menu."]})})})}):null}}]),c}(o.Component),ee=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(Object(f.g)(Z));function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var c,s=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;c=Reflect.construct(s,arguments,i)}else c=s.apply(this,arguments);return Object(a.a)(this,c)}}var ce=function(e){Object(r.a)(c,e);var t=te(c);function c(){return Object(i.a)(this,c),t.apply(this,arguments)}return Object(n.a)(c,[{key:"renderContent",value:function(){var e=this.props.authUser;return e&&e.is_admin?Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(J.a,{}),Object(s.jsx)(X.a,{})]}):Object(s.jsxs)(o.Fragment,{children:[Object(s.jsx)(ee,{}),Object(s.jsx)(T,{}),Object(s.jsx)(P,{}),Object(s.jsxs)("div",{id:"app-ballots-wrap",className:"row",children:[Object(s.jsx)("div",{className:"col col-12 col-md-6 mb-2",children:Object(s.jsx)(V,{})}),Object(s.jsx)("div",{className:"col col-12 col-md-6 mb-2",children:Object(s.jsx)(H,{})})]}),Object(s.jsx)(K,{})]})}},{key:"render",value:function(){var e=this.props.authUser;return e&&e.id?Object(s.jsx)("div",{id:"app-main-page",children:this.renderContent()}):null}}]),c}(o.Component);t.default=Object(d.b)((function(e){return{authUser:e.global.authUser}}))(ce)}}]);